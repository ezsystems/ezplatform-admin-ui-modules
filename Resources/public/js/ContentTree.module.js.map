{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fa0f438b83fac7245e1f","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack:///external {\"root\":\"PropTypes\",\"commonjs2\":\"prop-types\",\"commonjs\":\"prop-types\",\"amd\":\"prop-types\"}","webpack:///./src/modules/common/icon/icon.js","webpack:///./src/modules/common/helpers/request.helper.js","webpack:///./src/modules/common/services/notification.service.js","webpack:///./src/modules/content-tree/content.tree.module.js","webpack:///./src/modules/content-tree/components/content-tree/content.tree.js","webpack:///./src/modules/content-tree/components/list/list.component.js","webpack:///./src/modules/content-tree/components/list-item/list.item.component.js","webpack:///./src/modules/content-tree/services/content.tree.service.js"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE_0__","__WEBPACK_EXTERNAL_MODULE_1__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Icon","props","linkHref","customPath","className","extraClasses","_react2","default","createElement","xlinkHref","propTypes","PropTypes","string","isRequired","defaultProps","getBasicRequestInit","token","siteaccess","headers","X-Siteaccess","X-CSRF-Token","mode","credentials","handleRequestError","response","ok","Error","statusText","handleRequestResponse","json","handleRequestResponseStatus","status","NOTIFICATION_INFO_LABEL","NOTIFICATION_SUCCESS_LABEL","NOTIFICATION_WARNING_LABEL","NOTIFICATION_ERROR_LABEL","showNotification","detail","event","CustomEvent","document","body","dispatchEvent","showInfoNotification","message","label","showSuccessNotification","showWarningNotification","showErrorNotification","error","_react","_contentTree","KEY_CONTENT_TREE_SUBTREE","ContentTreeModule","Component","constructor","super","setInitialItemsState","bind","loadMoreSubitems","updateSubtreeAfterItemToggle","handleCollapseAllItems","savedSubtree","localStorage","getItem","items","preloadedLocations","subtree","JSON","parse","generateInitialSubtree","expandCurrentLocationInSubtree","componentDidMount","length","generateSubtree","saveSubtree","loadSubtree","restInfo","loadedSubtree","location","forceUpdate","parentLocationId","offset","limit","path","successCallback","loadLocationItems","updateLocationsStateAfterLoadingMoreItems","item","findItem","split","subitems","updateSubtreeAfterLoadMoreItems","updateItemInSubtree","isExpanded","addItemToSubtree","removeItemFromSubtree","parentSubtree","findParentSubtree","subitemsLoadLimit","children","push","_media-type","locationId","Math","ceil","index","findIndex","element","splice","setItem","stringify","shift","pop","reduce","subtreeChild","find","parseInt","_props","rootLocationId","currentLocationPath","filter","id","rootLocationIdIndex","pathStartingAfterRootLocation","slice","expandPathInSubtree","nextSubtree","itemsWithoutLeafs","isLast","Array","isArray","getCurrentLocationId","currentLocationIdString","render","attrs","currentLocationId","afterItemToggle","onCollapseAppItems","_content2","eZ","addConfig","number","arrayOf","shape","CLASS_IS_TREE_RESIZING","ContentTree","changeContainerWidth","addWidthChangeListener","handleResizeEnd","_refTreeContainer","React","createRef","state","resizeStartPositionX","containerWidth","resizedContainerWidth","isResizing","componentWillUnmount","clearDocumentResizingListeners","clientX","currentPositionX","setState","nativeEvent","current","getBoundingClientRect","width","window","addEventListener","classList","add","removeEventListener","remove","renderCollapseAllBtn","collapseAllLabel","Translator","trans","tabIndex","onClick","_state","rootLocationSubitems","rootLocationPath","containerAttrs","ref","listAttrs","style","_list2","onMouseDown","array","func","List","listItemAttrs","map","hasPreviousPath","locationHref","Routing","generate","itemPath","_listItem2","_extends","key","selected","href","ListItem","toggleExpandedState","cancelLoadingState","handleAfterExpandedStateChange","isLoading","_props2","checkCanLoadMore","_props3","totalSubitemsCount","renderIcon","_props4","contentTypeIdentifier","iconAttrs","helpers","contentType","getContentTypeIconUrl","_icon2","renderLoadMoreBtn","loadingSpinner","showMoreLabel","loadingMoreLabel","btnLabel","type","_props5","isInvisible","itemAttrs","togglerAttrs","hidden","bool","isContainer","_request","_notification","callback","request","Request","method","Accept","fetch","then","data","ContentTreeNode","mapChildrenToSubitems","catch","LoadSubtreeRequest","nodes","Content-Type","ContentTreeRoot","ContentTreeNodeList","mapChildrenToSubitemsDeep","tree","totalChildrenCount","displayLimit"],"mappings":"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","file":"ContentTree.module.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"prop-types\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"prop-types\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ContentTree\"] = factory(require(\"react\"), require(\"prop-types\"));\n\telse\n\t\troot[\"eZ\"] = root[\"eZ\"] || {}, root[\"eZ\"][\"modules\"] = root[\"eZ\"][\"modules\"] || {}, root[\"eZ\"][\"modules\"][\"ContentTree\"] = factory(root[\"React\"], root[\"PropTypes\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 62);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fa0f438b83fac7245e1f","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}\n// module id = 0\n// module chunks = 0 1 2 3","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"PropTypes\",\"commonjs2\":\"prop-types\",\"commonjs\":\"prop-types\",\"amd\":\"prop-types\"}\n// module id = 1\n// module chunks = 0 1 2 3","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Icon = (props) => {\n    const linkHref = props.customPath ? props.customPath : `/bundles/ezplatformadminui/img/ez-icons.svg#${props.name}`;\n    let className = 'ez-icon';\n\n    if (props.extraClasses) {\n        className = `${className} ${props.extraClasses}`;\n    }\n\n    return (\n        <svg className={className}>\n            <use xlinkHref={linkHref} />\n        </svg>\n    );\n};\n\nIcon.propTypes = {\n    extraClasses: PropTypes.string.isRequired,\n    name: PropTypes.string,\n    customPath: PropTypes.string,\n};\n\nIcon.defaultProps = {\n    customPath: null,\n    name: null,\n};\n\nexport default Icon;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/common/icon/icon.js","/**\n * Returns basic RequestInit object for Request\n *\n * @function getBasicRequestInit\n * @param {Object} restInfo REST config hash containing: token and siteaccess properties\n * @returns {RequestInit}\n */\nexport const getBasicRequestInit = ({ token, siteaccess }) => {\n    return {\n        headers: {\n            'X-Siteaccess': siteaccess,\n            'X-CSRF-Token': token,\n        },\n        mode: 'same-origin',\n        credentials: 'same-origin',\n    };\n};\n\n/**\n * Handles request error\n *\n * @function handleRequestResponse\n * @param {Response} response\n * @returns {Response}\n */\nexport const handleRequestError = (response) => {\n    if (!response.ok) {\n        throw Error(response.statusText);\n    }\n\n    return response;\n};\n\n/**\n * Handles request response\n *\n * @function handleRequestResponse\n * @param {Response} response\n * @returns {Error|Promise}\n */\nexport const handleRequestResponse = (response) => {\n    return handleRequestError(response).json();\n};\n\n/**\n * Handles request response; returns status if response is OK\n *\n * @function handleRequestResponseStatus\n * @param {Response} response\n * @returns {number}\n */\nexport const handleRequestResponseStatus = (response) => {\n    return handleRequestError(response).status;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/common/helpers/request.helper.js","export const NOTIFICATION_INFO_LABEL = 'info';\nexport const NOTIFICATION_SUCCESS_LABEL = 'success';\nexport const NOTIFICATION_WARNING_LABEL = 'warning';\nexport const NOTIFICATION_ERROR_LABEL = 'danger';\n\n/**\n * Dispatches notification event\n *\n * @method showNotification\n * @param {{message: string, label: string}} detail\n */\nexport const showNotification = (detail) => {\n    const event = new CustomEvent('ez-notify', {\n        detail,\n    });\n\n    document.body.dispatchEvent(event);\n};\n\n/**\n * Dispatches info notification event\n *\n * @method showInfoNotification\n * @param {String} message\n */\nexport const showInfoNotification = (message) => {\n    showNotification({\n        message,\n        label: NOTIFICATION_INFO_LABEL,\n    });\n};\n\n/**\n * Dispatches success notification event\n *\n * @method showSuccessNotification\n * @param {String} message\n */\nexport const showSuccessNotification = (message) => {\n    showNotification({\n        message,\n        label: NOTIFICATION_SUCCESS_LABEL,\n    });\n};\n\n/**\n * Dispatches warning notification event\n *\n * @method showWarningNotification\n * @param {String} message\n */\nexport const showWarningNotification = (message) => {\n    showNotification({\n        message,\n        label: NOTIFICATION_WARNING_LABEL,\n    });\n};\n\n/**\n * Dispatches error notification event\n *\n * @method showErrorNotification\n * @param {(string|Error)} error\n */\nexport const showErrorNotification = (error) => {\n    const isErrorObj = error instanceof Error;\n    const message = isErrorObj ? error.message : error;\n\n    showNotification({\n        message,\n        label: NOTIFICATION_ERROR_LABEL,\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/common/services/notification.service.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ContentTree from './components/content-tree/content.tree';\nimport { loadLocationItems, loadSubtree } from './services/content.tree.service';\n\nconst KEY_CONTENT_TREE_SUBTREE = 'ez-content-tree-subtree';\n\nexport default class ContentTreeModule extends Component {\n    constructor(props) {\n        super(props);\n\n        this.setInitialItemsState = this.setInitialItemsState.bind(this);\n        this.loadMoreSubitems = this.loadMoreSubitems.bind(this);\n        this.updateSubtreeAfterItemToggle = this.updateSubtreeAfterItemToggle.bind(this);\n        this.handleCollapseAllItems = this.handleCollapseAllItems.bind(this);\n\n        const savedSubtree = localStorage.getItem(KEY_CONTENT_TREE_SUBTREE);\n\n        this.items = props.preloadedLocations;\n        this.subtree = savedSubtree ? JSON.parse(savedSubtree) : this.generateInitialSubtree();\n\n        this.expandCurrentLocationInSubtree();\n    }\n\n    componentDidMount() {\n        if (this.items.length) {\n            this.subtree = this.generateSubtree(this.items);\n            this.saveSubtree();\n\n            return;\n        }\n\n        loadSubtree(this.props.restInfo, this.subtree, (loadedSubtree) => {\n            this.setInitialItemsState(loadedSubtree[0]);\n        });\n    }\n\n    setInitialItemsState(location) {\n        this.items = [location];\n\n        this.forceUpdate();\n    }\n\n    loadMoreSubitems({ parentLocationId, offset, limit, path }, successCallback) {\n        loadLocationItems(\n            this.props.restInfo,\n            parentLocationId,\n            this.updateLocationsStateAfterLoadingMoreItems.bind(this, path, successCallback),\n            limit,\n            offset\n        );\n    }\n\n    updateLocationsStateAfterLoadingMoreItems(path, successCallback, location) {\n        const item = this.findItem(this.items, path.split(','));\n\n        if (!item) {\n            return;\n        }\n\n        item.subitems = [...item.subitems, ...location.subitems];\n\n        this.updateSubtreeAfterLoadMoreItems(path);\n        successCallback();\n        this.forceUpdate();\n    }\n\n    updateSubtreeAfterLoadMoreItems(path) {\n        const item = this.findItem(this.items, path.split(','));\n\n        this.updateItemInSubtree(this.subtree[0], item, path.split(','));\n        this.saveSubtree();\n    }\n\n    updateSubtreeAfterItemToggle(path, isExpanded) {\n        const item = this.findItem(this.items, path.split(','));\n\n        if (isExpanded) {\n            this.addItemToSubtree(this.subtree[0], item, path.split(','));\n        } else {\n            this.removeItemFromSubtree(this.subtree[0], item, path.split(','));\n        }\n\n        this.saveSubtree();\n    }\n\n    addItemToSubtree(subtree, item, path) {\n        const parentSubtree = this.findParentSubtree(subtree, path);\n\n        if (!parentSubtree) {\n            return;\n        }\n\n        const { subitemsLoadLimit } = this.props;\n\n        parentSubtree.children.push({\n            '_media-type': 'application/vnd.ez.api.ContentTreeLoadSubtreeRequestNode',\n            locationId: item.locationId,\n            limit: Math.ceil(item.subitems.length / subitemsLoadLimit) * subitemsLoadLimit,\n            offset: 0,\n            children: [],\n        });\n    }\n\n    removeItemFromSubtree(subtree, item, path) {\n        const parentSubtree = this.findParentSubtree(subtree, path);\n\n        if (!parentSubtree) {\n            return;\n        }\n\n        const index = parentSubtree.children.findIndex((element) => element.locationId === item.locationId);\n\n        if (index > -1) {\n            parentSubtree.children.splice(index, 1);\n        }\n    }\n\n    updateItemInSubtree(subtree, item, path) {\n        const parentSubtree = this.findParentSubtree(subtree, path);\n\n        if (!parentSubtree) {\n            return;\n        }\n\n        const index = parentSubtree.children.findIndex((element) => element.locationId === item.locationId);\n\n        if (index > -1) {\n            parentSubtree.children[index].limit = item.subitems.length;\n        }\n    }\n\n    saveSubtree() {\n        localStorage.setItem(KEY_CONTENT_TREE_SUBTREE, JSON.stringify(this.subtree));\n    }\n\n    findParentSubtree(subtree, path) {\n        if (path.length < 2) {\n            return;\n        }\n\n        path.shift();\n        path.pop();\n\n        return path.reduce(\n            (subtreeChild, locationId) => subtreeChild.children.find((element) => element.locationId === parseInt(locationId, 10)),\n            subtree\n        );\n    }\n\n    expandCurrentLocationInSubtree() {\n        const { rootLocationId, currentLocationPath } = this.props;\n        const path = currentLocationPath.split('/').filter((id) => !!id);\n        const rootLocationIdIndex = path.findIndex((element) => parseInt(element, 10) === rootLocationId);\n\n        if (rootLocationIdIndex === -1) {\n            return;\n        }\n\n        const pathStartingAfterRootLocation = path.slice(rootLocationIdIndex - path.length + 1);\n\n        this.expandPathInSubtree(this.subtree[0], pathStartingAfterRootLocation);\n    }\n\n    expandPathInSubtree(subtree, path) {\n        if (!path.length) {\n            return;\n        }\n\n        const locationId = parseInt(path[0], 10);\n        let nextSubtree = subtree.children.find((element) => element.locationId === locationId);\n\n        if (!nextSubtree) {\n            nextSubtree = {\n                '_media-type': 'application/vnd.ez.api.ContentTreeLoadSubtreeRequestNode',\n                locationId: locationId,\n                limit: this.props.subitemsLoadLimit,\n                offset: 0,\n                children: [],\n            };\n            subtree.children.push(nextSubtree);\n        }\n\n        path.shift();\n        this.expandPathInSubtree(nextSubtree, path);\n    }\n\n    generateInitialSubtree() {\n        return [\n            {\n                '_media-type': 'application/vnd.ez.api.ContentTreeLoadSubtreeRequestNode',\n                locationId: this.props.rootLocationId,\n                limit: this.props.subitemsLoadLimit,\n                offset: 0,\n                children: [],\n            },\n        ];\n    }\n\n    generateSubtree(items) {\n        const itemsWithoutLeafs = [];\n        const { subitemsLoadLimit } = this.props;\n\n        for (const item of items) {\n            const isLeaf = !item.subitems.length;\n\n            if (!isLeaf) {\n                itemsWithoutLeafs.push({\n                    '_media-type': 'application/vnd.ez.api.ContentTreeLoadSubtreeRequestNode',\n                    locationId: item.locationId,\n                    limit: Math.ceil(item.subitems.length / subitemsLoadLimit) * subitemsLoadLimit,\n                    offset: 0,\n                    children: this.generateSubtree(item.subitems),\n                });\n            }\n        }\n\n        return itemsWithoutLeafs;\n    }\n\n    findItem(items, path) {\n        const isLast = path.length === 1;\n        const item = items.find((element) => element.locationId === parseInt(path[0], 10));\n\n        if (!item) {\n            return null;\n        }\n\n        if (isLast) {\n            return item;\n        }\n\n        if (!(item.hasOwnProperty('subitems') && Array.isArray(item.subitems))) {\n            return null;\n        }\n\n        path.shift();\n\n        return this.findItem(item.subitems, path);\n    }\n\n    getCurrentLocationId() {\n        const currentLocationIdString = this.props.currentLocationPath\n            .split('/')\n            .filter((id) => !!id)\n            .pop();\n\n        return parseInt(currentLocationIdString, 10);\n    }\n\n    handleCollapseAllItems() {\n        this.items = [];\n        this.forceUpdate();\n\n        this.subtree = this.generateInitialSubtree();\n        this.saveSubtree();\n\n        loadSubtree(this.props.restInfo, this.subtree, (loadedSubtree) => {\n            this.setInitialItemsState(loadedSubtree[0]);\n        });\n    }\n\n    render() {\n        const { subitemsLoadLimit } = this.props;\n        const attrs = {\n            items: this.items,\n            currentLocationId: this.getCurrentLocationId(),\n            subitemsLoadLimit,\n            loadMoreSubitems: this.loadMoreSubitems,\n            afterItemToggle: this.updateSubtreeAfterItemToggle,\n            onCollapseAppItems: this.handleCollapseAllItems,\n        };\n\n        return <ContentTree {...attrs} />;\n    }\n}\n\neZ.addConfig('modules.ContentTree', ContentTreeModule);\n\nContentTreeModule.propTypes = {\n    rootLocationId: PropTypes.number.isRequired,\n    currentLocationPath: PropTypes.number.isRequired,\n    preloadedLocations: PropTypes.arrayOf(PropTypes.object),\n    subitemsLoadLimit: PropTypes.number,\n    restInfo: PropTypes.shape({\n        token: PropTypes.string.isRequired,\n        siteaccess: PropTypes.string.isRequired,\n    }).isRequired,\n};\n\nContentTreeModule.defaultProps = {\n    rootLocationId: 2,\n    preloadedLocations: [],\n    subitemsLoadLimit: 10,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/content-tree/content.tree.module.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport List from '../list/list.component';\n\nconst CLASS_IS_TREE_RESIZING = 'ez-is-tree-resizing';\n\nexport default class ContentTree extends Component {\n    constructor(props) {\n        super(props);\n\n        this.changeContainerWidth = this.changeContainerWidth.bind(this);\n        this.addWidthChangeListener = this.addWidthChangeListener.bind(this);\n        this.handleResizeEnd = this.handleResizeEnd.bind(this);\n        this._refTreeContainer = React.createRef();\n\n        this.state = {\n            resizeStartPositionX: 0,\n            containerWidth: 0,\n            resizedContainerWidth: 0,\n            isResizing: false,\n        };\n    }\n\n    componentWillUnmount() {\n        this.clearDocumentResizingListeners();\n    }\n\n    changeContainerWidth({ clientX }) {\n        const currentPositionX = clientX;\n\n        this.setState((state) => ({\n            resizedContainerWidth: state.containerWidth + (currentPositionX - state.resizeStartPositionX),\n        }));\n    }\n\n    addWidthChangeListener({ nativeEvent }) {\n        const resizeStartPositionX = nativeEvent.clientX;\n        const containerWidth = this._refTreeContainer.current.getBoundingClientRect().width;\n\n        window.document.addEventListener('mousemove', this.changeContainerWidth, false);\n        window.document.addEventListener('mouseup', this.handleResizeEnd, false);\n        window.document.body.classList.add(CLASS_IS_TREE_RESIZING);\n\n        this.setState(() => ({ resizeStartPositionX, containerWidth, isResizing: true }));\n    }\n\n    handleResizeEnd() {\n        this.clearDocumentResizingListeners();\n\n        this.setState((state) => ({\n            resizeStartPositionX: 0,\n            containerWidth: state.resizedContainerWidth,\n            isResizing: false,\n        }));\n    }\n\n    clearDocumentResizingListeners() {\n        window.document.removeEventListener('mousemove', this.changeContainerWidth);\n        window.document.removeEventListener('mouseup', this.handleResizeEnd);\n        window.document.body.classList.remove(CLASS_IS_TREE_RESIZING);\n    }\n\n    renderCollapseAllBtn() {\n        const collapseAllLabel = Translator.trans(/*@Desc(\"Collapse all\")*/ 'collapse_all', {}, 'content_tree');\n\n        return (\n            <div tabIndex={-1} className=\"m-tree__collapse-all-btn\" onClick={this.props.onCollapseAppItems}>\n                {collapseAllLabel}\n            </div>\n        );\n    }\n\n    render() {\n        const { isResizing, containerWidth, resizedContainerWidth } = this.state;\n        const { items, loadMoreSubitems, currentLocationId, subitemsLoadLimit, afterItemToggle } = this.props;\n        const width = isResizing ? resizedContainerWidth : containerWidth;\n        const rootLocationSubitems = items.length ? items[0].subitems : [];\n        const rootLocationPath = items.length ? '' + items[0].locationId : '';\n        const containerAttrs = { className: 'm-tree', ref: this._refTreeContainer };\n        const listAttrs = {\n            items: rootLocationSubitems,\n            path: rootLocationPath,\n            loadMoreSubitems,\n            currentLocationId,\n            subitemsLoadLimit,\n            afterItemToggle,\n        };\n\n        if (width) {\n            containerAttrs.style = { width: `${width}px` };\n        }\n\n        return (\n            <div {...containerAttrs}>\n                <div className=\"m-tree__scrollable-wrapper\">\n                    <List {...listAttrs} />\n                </div>\n                <div className=\"m-tree__resize-handler\" onMouseDown={this.addWidthChangeListener} />\n                {this.renderCollapseAllBtn()}\n            </div>\n        );\n    }\n}\n\nContentTree.propTypes = {\n    items: PropTypes.array.isRequired,\n    loadMoreSubitems: PropTypes.func.isRequired,\n    currentLocationId: PropTypes.number.isRequired,\n    subitemsLoadLimit: PropTypes.number,\n    afterItemToggle: PropTypes.func.isRequired,\n    onCollapseAppItems: PropTypes.func.isRequired,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/content-tree/components/content-tree/content.tree.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '../list-item/list.item.component';\n\nconst List = ({ items, loadMoreSubitems, currentLocationId, path, subitemsLoadLimit, afterItemToggle }) => {\n    const listAttrs = { loadMoreSubitems, currentLocationId, subitemsLoadLimit, afterItemToggle };\n    const listItemAttrs = { loadMoreSubitems, afterItemToggle };\n\n    return (\n        <ul className=\"c-list\">\n            {items.map((item) => {\n                const hasPreviousPath = path && path.length;\n                const locationHref = window.Routing.generate('_ezpublishLocation', { locationId: item.locationId });\n                const itemPath = `${hasPreviousPath ? path + ',' : ''}${item.locationId}`;\n                const { subitems } = item;\n\n                return (\n                    <ListItem\n                        {...item}\n                        {...listItemAttrs}\n                        key={item.locationId}\n                        selected={item.locationId === currentLocationId}\n                        subitemsLoadLimit={subitemsLoadLimit}\n                        href={locationHref}\n                        path={itemPath}>\n                        {subitems.length ? <List path={itemPath} items={subitems} {...listAttrs} /> : null}\n                    </ListItem>\n                );\n            })}\n        </ul>\n    );\n};\n\nList.propTypes = {\n    path: PropTypes.string.isRequired,\n    items: PropTypes.array.isRequired,\n    loadMoreSubitems: PropTypes.func.isRequired,\n    currentLocationId: PropTypes.number.isRequired,\n    subitemsLoadLimit: PropTypes.number,\n    afterItemToggle: PropTypes.func.isRequired,\n};\n\nexport default List;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/content-tree/components/list/list.component.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Icon from '../../../common/icon/icon';\n\nclass ListItem extends Component {\n    constructor(props) {\n        super(props);\n\n        this.toggleExpandedState = this.toggleExpandedState.bind(this);\n        this.cancelLoadingState = this.cancelLoadingState.bind(this);\n        this.loadMoreSubitems = this.loadMoreSubitems.bind(this);\n        this.handleAfterExpandedStateChange = this.handleAfterExpandedStateChange.bind(this);\n\n        this.state = {\n            isExpanded: !!props.subitems.length,\n            isLoading: false,\n        };\n    }\n\n    cancelLoadingState() {\n        this.setState(() => ({ isLoading: false }));\n    }\n\n    toggleExpandedState() {\n        this.setState(\n            (state) => ({ isExpanded: !state.isExpanded }),\n            () => {\n                const { afterItemToggle, path } = this.props;\n\n                afterItemToggle(path, this.state.isExpanded);\n                this.handleAfterExpandedStateChange();\n            }\n        );\n    }\n\n    handleAfterExpandedStateChange() {\n        const loadInitialItems = this.state.isExpanded && !this.props.subitems.length;\n\n        if (loadInitialItems) {\n            this.loadMoreSubitems();\n        }\n    }\n\n    loadMoreSubitems() {\n        if (this.state.isLoading) {\n            return;\n        }\n\n        const { subitems, path, locationId, loadMoreSubitems } = this.props;\n\n        this.setState(\n            () => ({ isLoading: true }),\n            () =>\n                loadMoreSubitems(\n                    {\n                        path,\n                        parentLocationId: locationId,\n                        offset: subitems.length,\n                        limit: this.props.subitemsLoadLimit,\n                    },\n                    this.cancelLoadingState\n                )\n        );\n    }\n\n    checkCanLoadMore() {\n        const { subitems, totalSubitemsCount } = this.props;\n\n        return subitems.length < totalSubitemsCount;\n    }\n\n    /**\n     * Renders an icon of a content type\n     *\n     * @method renderIcon\n     * @returns {JSX.Element}\n     */\n    renderIcon() {\n        const { contentTypeIdentifier, selected } = this.props;\n        const iconAttrs = {\n            extraClasses: `ez-icon--small ez-icon--${selected ? 'light' : 'dark'}`,\n        };\n\n        if (!this.state.isLoading || this.props.subitems.length) {\n            iconAttrs.customPath =\n                eZ.helpers.contentType.getContentTypeIconUrl(contentTypeIdentifier) || eZ.helpers.contentType.getContentTypeIconUrl('file');\n        } else {\n            iconAttrs.name = 'spinner';\n            iconAttrs.extraClasses = `${iconAttrs.extraClasses} ez-spin`;\n        }\n\n        return (\n            <span className=\"c-list-item__icon\">\n                <Icon {...iconAttrs} />\n            </span>\n        );\n    }\n\n    renderLoadMoreBtn() {\n        const { subitems } = this.props;\n\n        if (!this.state.isExpanded || !this.checkCanLoadMore() || !subitems.length) {\n            return null;\n        }\n\n        const { isLoading } = this.state;\n        let loadingSpinner = null;\n        const showMoreLabel = Translator.trans(/*@Desc(\"Show more\")*/ 'show_more', {}, 'content_tree');\n        const loadingMoreLabel = Translator.trans(/*@Desc(\"Loading more...\")*/ 'loading_more', {}, 'content_tree');\n        const btnLabel = isLoading ? loadingMoreLabel : showMoreLabel;\n\n        if (isLoading) {\n            loadingSpinner = <Icon name=\"spinner\" extraClasses=\"ez-spin ez-icon--small c-list-item__load-more-btn-spinner\" />;\n        }\n\n        return (\n            <button type=\"button\" className=\"c-list-item__load-more-btn btn ez-btn\" onClick={this.loadMoreSubitems}>\n                {loadingSpinner} {btnLabel}\n            </button>\n        );\n    }\n\n    render() {\n        const { totalSubitemsCount, children, isInvisible, selected, href, name } = this.props;\n        const itemClassName = 'c-list-item';\n        const togglerClassName = 'c-list-item__toggler';\n        const itemAttrs = { className: itemClassName };\n        const togglerAttrs = {\n            className: togglerClassName,\n            onClick: this.toggleExpandedState,\n            hidden: !totalSubitemsCount,\n            tabIndex: -1,\n        };\n\n        if (totalSubitemsCount) {\n            itemAttrs.className = `${itemAttrs.className} ${itemClassName}--has-sub-items`;\n        }\n\n        if (this.checkCanLoadMore()) {\n            itemAttrs.className = `${itemAttrs.className} ${itemClassName}--can-load-more`;\n        }\n\n        if (this.state.isExpanded) {\n            itemAttrs.className = `${itemAttrs.className} ${itemClassName}--is-expanded`;\n        }\n\n        if (isInvisible) {\n            itemAttrs.className = `${itemAttrs.className} ${itemClassName}--is-hidden`;\n        }\n\n        if (selected) {\n            itemAttrs.className = `${itemAttrs.className} ${itemClassName}--is-selected`;\n            togglerAttrs.className = `${togglerAttrs.className} ${togglerClassName}--light`;\n        }\n\n        return (\n            <li {...itemAttrs}>\n                <div className=\"c-list-item__label\">\n                    <span {...togglerAttrs} />\n                    <a className=\"c-list-item__link\" href={href}>\n                        {this.renderIcon()} {name}\n                    </a>\n                </div>\n                {children}\n                {this.renderLoadMoreBtn()}\n            </li>\n        );\n    }\n}\n\nListItem.propTypes = {\n    path: PropTypes.string.isRequired,\n    href: PropTypes.string.isRequired,\n    contentTypeIdentifier: PropTypes.string.isRequired,\n    totalSubitemsCount: PropTypes.number.isRequired,\n    subitems: PropTypes.array.isRequired,\n    children: PropTypes.element,\n    hidden: PropTypes.bool.isRequired,\n    isContainer: PropTypes.bool.isRequired,\n    selected: PropTypes.bool.isRequired,\n    locationId: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    isInvisible: PropTypes.bool.isRequired,\n    loadMoreSubitems: PropTypes.func.isRequired,\n    subitemsLoadLimit: PropTypes.number,\n    afterItemToggle: PropTypes.func.isRequired,\n};\n\nListItem.defaultProps = {\n    hidden: false,\n};\n\nexport default ListItem;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/content-tree/components/list-item/list.item.component.js","import { handleRequestResponse } from '../../common/helpers/request.helper';\nimport { showErrorNotification } from '../../common/services/notification.service';\n\nconst ENDPOINT_LOAD_SUBITEMS = '/api/ezp/v2/location/tree/load-subitems';\nconst ENDPOINT_LOAD_SUBTREE = '/api/ezp/v2/location/tree/load-subtree';\n\nexport const loadLocationItems = ({ siteaccess }, parentLocationId, callback, limit = 50, offset = 0) => {\n    const request = new Request(`${ENDPOINT_LOAD_SUBITEMS}/${parentLocationId}/${limit}/${offset}`, {\n        method: 'GET',\n        mode: 'same-origin',\n        credentials: 'same-origin',\n        headers: {\n            Accept: 'application/vnd.ez.api.ContentTreeNode+json',\n            'X-Siteaccess': siteaccess\n        },\n    });\n\n    fetch(request)\n        .then(handleRequestResponse)\n        .then((data) => {\n            const location = data.ContentTreeNode;\n\n            location.children = location.children.map(mapChildrenToSubitems);\n\n            return mapChildrenToSubitems(location);\n        })\n        .then(callback)\n        .catch(showErrorNotification);\n};\n\nexport const loadSubtree = ({ token, siteaccess }, subtree, callback) => {\n    const request = new Request(`${ENDPOINT_LOAD_SUBTREE}`, {\n        method: 'POST',\n        mode: 'same-origin',\n        credentials: 'same-origin',\n        body: JSON.stringify({\n            LoadSubtreeRequest: {\n                '_media-type': 'application/vnd.ez.api.ContentTreeLoadSubtreeRequest',\n                nodes: subtree,\n            },\n        }),\n        headers: {\n            Accept: 'application/vnd.ez.api.ContentTreeRoot+json',\n            'Content-Type': 'application/vnd.ez.api.ContentTreeLoadSubtreeRequest+json',\n            'X-Siteaccess': siteaccess,\n            'X-CSRF-Token': token,\n        },\n    });\n\n    fetch(request)\n        .then(handleRequestResponse)\n        .then((data) => {\n            const loadedSubtree = data.ContentTreeRoot.ContentTreeNodeList;\n\n            return mapChildrenToSubitemsDeep(loadedSubtree);\n        })\n        .then(callback)\n        .catch(showErrorNotification);\n};\n\nconst mapChildrenToSubitemsDeep = (tree) =>\n    tree.map((subtree) => {\n        mapChildrenToSubitems(subtree);\n        subtree.subitems = mapChildrenToSubitemsDeep(subtree.subitems);\n\n        return subtree;\n    });\n\nconst mapChildrenToSubitems = (location) => {\n    location.totalSubitemsCount = location.totalChildrenCount;\n    location.subitems = location.children;\n\n    delete location.totalChildrenCount;\n    delete location.children;\n    delete location.displayLimit;\n\n    return location;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/content-tree/services/content.tree.service.js"],"sourceRoot":""}