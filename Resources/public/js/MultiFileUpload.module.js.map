{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 31a20886e0608cfd7473","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack:///external {\"root\":\"PropTypes\",\"commonjs2\":\"prop-types\",\"commonjs\":\"prop-types\",\"amd\":\"prop-types\"}","webpack:///./src/modules/multi-file-upload/helpers/text.helper.js","webpack:///./src/modules/common/icon/icon.js","webpack:///./src/modules/multi-file-upload/multi.file.upload.module.js","webpack:///./src/modules/multi-file-upload/components/upload-popup/upload.popup.component.js","webpack:///./src/modules/multi-file-upload/components/drop-area/drop.area.component.js","webpack:///./src/modules/multi-file-upload/components/upload-list/upload.list.component.js","webpack:///./src/modules/multi-file-upload/components/upload-list/upload.item.component.js","webpack:///./src/modules/multi-file-upload/components/progress-bar/progress.bar.component.js","webpack:///./src/modules/multi-file-upload/services/multi.file.upload.service.js","webpack:///./src/modules/common/tooltip-popup/tooltip.popup.component.js"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE_0__","__WEBPACK_EXTERNAL_MODULE_1__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","fileSizeToString","filesize","decimalUnits","size","parseInt","unitIndex","toFixed","Icon","props","linkHref","customPath","className","extraClasses","_react2","default","createElement","xlinkHref","propTypes","PropTypes","string","isRequired","defaultProps","_react","_multiFileUpload","MultiFileUploadModule","Component","constructor","super","popupVisible","_itemsUploaded","itemsToUpload","length","handleDropOnWindow","bind","handleAfterUpload","showUploadPopup","hidePopup","processUploadedFiles","state","allowDropOnWindow","uploadDisabled","values","contentCreatePermissionsConfig","every","isEnabled","componentDidMount","manageDropEvent","componentDidUpdate","_state","window","addEventListener","preventDefaultAction","setState","assign","onPopupClose","itemsUploaded","event","removeEventListener","extractDroppedFilesList","list","nativeEvent","dataTransfer","target","Array","from","files","map","file","id","Math","floor","random","Date","now","preventDefault","stopPropagation","renderBtn","withUploadButton","attrs","title","Translator","trans","onClick","type","disabled","_icon2","renderPopup","visible","onClose","onAfterUpload","_uploadPopup2","render","eZ","addConfig","adminUiConfig","shape","multiFileUpload","defaultMappings","arrayOf","fallbackContentType","locationMappings","maxFileSize","number","token","siteaccess","parentInfo","contentTypeIdentifier","contentTypeId","locationPath","language","checkCanUpload","func","createFileStruct","deleteFile","publishFile","array","bool","contentTypesMap","currentLanguage","CLASS_SCROLL_DISABLED","UploadPopupModule","uploadFiles","document","body","classList","add","componentWillUnmount","remove","UNSAFE_componentWillReceiveProps","filter","stateItem","find","propItem","tooltipAttrs","listAttrs","_tooltipPopup2","_extends","_dropArea2","onDrop","_uploadList2","popupTitle","onUpload","onUploadEnd","onUploadFail","onItemEdit","onItemRemove","_text","DropAreaComponent","_refFileInput","openFileSelector","handleUpload","click","maxFileSizeMessage","dropActionMessage","uploadBtnLabel","multiple","tabIndex","ref","hidden","onChange","UploadListComponent","items","item","data","handleAfterAbort","uploaded","total","handleAfterDelete","renderItemToUpload","renderItem","isUploaded","onAfterAbort","renderUploadedItem","onAfterDelete","customAttrs","_props","key","_uploadItem2","uploadedItemsListTitle","UploadItemComponent","handleFileSizeNotAllowed","handleFileTypeNotAllowed","handleContentTypeNotAllowed","handleEditBtnClick","handleUploadAbort","handleUploadError","handleUploadLoad","handleUploadProgress","handleUploadEnd","handleLoadStart","handleFileDeleted","abortUploading","contentInfoInput","contentVersionInfoInput","contentVersionNoInput","contentEditBtn","uploading","disallowed","disallowedType","disallowedSize","disallowedContentType","aborted","failed","deleted","progress","xhr","struct","totalSize","uploadedSize","querySelector","config","callbacks","fileTypeNotAllowedCallback","fileSizeNotAllowedCallback","contentTypeNotAllowedCallback","languageCode","then","initPublishFile","upload","onabort","onerror","onload","onprogress","onloadstart","fraction","loaded","JSON","parse","response","abort","getContentTypeIdentifier","_props2","Content","contentTypeHref","ContentType","_href","contentType","identifier","renderIcon","contentTypeIconUrl","helpers","getContentTypeIconUrl","renderProgressBar","_progressBar2","renderErrorMessage","_state2","isError","cannotUploadMessage","disallowedTypeMessage","disallowedSizeMessage","disallowedContentTypeMessage","msg","renderSuccessMessage","_state3","isSuccess","message","renderAbortBtn","_state4","label","content","contentId","_id","CurrentVersion","Version","VersionInfo","VersionTranslationInfo","Language","versionNo","value","checked","renderEditBtn","_state5","renderDeleteBtn","_state6","ProgressBarComponent","style","width","handleRequestResponse","ok","Error","text","findFileTypeMapping","mappings","mimeTypes","checkFileTypeAllowed","locationMapping","isMimeTypeAllowed","detectContentTypeMapping","prepareStruct","parentLocation","endsWith","slice","mapping","request","Request","method","headers","Accept","X-Siteaccess","X-CSRF-Token","credentials","mode","fetch","getContentTypeByIdentifier","json","catch","notification","showErrorNotification","fields","fieldDefinitionIdentifier","nameFieldIdentifier","fieldValue","contentFieldIdentifier","fileName","fileReader","result","replace","ContentCreate","ContentTypeInfoList","mainLanguageCode","LocationCreate","ParentLocation","sortField","sortOrder","Section","alwaysAvailable","remoteId","modificationDate","toISOString","field","createDraft","requestEventHandlers","XMLHttpRequest","stringify","Content-Type","Promise","resolve","reject","open","onreadystatechange","onSuccess","onError","readyState","status","statusText","keys","uploadEvents","ontimeout","headerType","setRequestHeader","send","contentTypeConfig","canCreateContent","params","readAsDataURL","FileReader","callback","X-HTTP-Method-Override","TooltipPopupComponent","children","node"],"mappings":"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","file":"MultiFileUpload.module.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"prop-types\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"prop-types\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MultiFileUpload\"] = factory(require(\"react\"), require(\"prop-types\"));\n\telse\n\t\troot[\"eZ\"] = root[\"eZ\"] || {}, root[\"eZ\"][\"modules\"] = root[\"eZ\"][\"modules\"] || {}, root[\"eZ\"][\"modules\"][\"MultiFileUpload\"] = factory(root[\"React\"], root[\"PropTypes\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 55);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 31a20886e0608cfd7473","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}\n// module id = 0\n// module chunks = 0 1 2 3","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"PropTypes\",\"commonjs2\":\"prop-types\",\"commonjs\":\"prop-types\",\"amd\":\"prop-types\"}\n// module id = 1\n// module chunks = 0 1 2 3","/**\n * Returns a filesize as a formatted string\n *\n * @function fileSizeToString\n * @param {Number} filesize\n * @returns {String}\n */\nexport const fileSizeToString = (filesize) => {\n    const units = ['bytes', 'KB', 'MB', 'GB'];\n    const kilobyte = 1024;\n    let size = parseInt(filesize, 10) || 0;\n    let unitIndex = 0;\n    let decimalUnits;\n\n    while (size >= kilobyte) {\n        size = size / kilobyte;\n        unitIndex++;\n    }\n\n    decimalUnits = unitIndex < 1 ? 0 : 1;\n\n    return size.toFixed(size >= 10 || decimalUnits) + ' ' + units[unitIndex];\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/multi-file-upload/helpers/text.helper.js","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Icon = (props) => {\n    const linkHref = props.customPath ? props.customPath : `/bundles/ezplatformadminui/img/ez-icons.svg#${props.name}`;\n    let className = 'ez-icon';\n\n    if (props.extraClasses) {\n        className = `${className} ${props.extraClasses}`;\n    }\n\n    return (\n        <svg className={className}>\n            <use xlinkHref={linkHref} />\n        </svg>\n    );\n};\n\nIcon.propTypes = {\n    extraClasses: PropTypes.string.isRequired,\n    name: PropTypes.string,\n    customPath: PropTypes.string,\n};\n\nIcon.defaultProps = {\n    customPath: null,\n    name: null,\n};\n\nexport default Icon;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/common/icon/icon.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport UploadPopupComponent from './components/upload-popup/upload.popup.component';\nimport { createFileStruct, publishFile, deleteFile, checkCanUpload } from './services/multi.file.upload.service';\nimport Icon from '../common/icon/icon';\n\nexport default class MultiFileUploadModule extends Component {\n    constructor(props) {\n        super(props);\n\n        let popupVisible = true;\n\n        this._itemsUploaded = [];\n\n        if (!props.itemsToUpload || !props.itemsToUpload.length) {\n            popupVisible = false;\n        }\n\n        this.handleDropOnWindow = this.handleDropOnWindow.bind(this);\n        this.handleAfterUpload = this.handleAfterUpload.bind(this);\n        this.showUploadPopup = this.showUploadPopup.bind(this);\n        this.hidePopup = this.hidePopup.bind(this);\n        this.processUploadedFiles = this.processUploadedFiles.bind(this);\n\n        this.state = {\n            popupVisible,\n            itemsToUpload: props.itemsToUpload,\n            allowDropOnWindow: true,\n            uploadDisabled: Object.values(props.contentCreatePermissionsConfig).every((isEnabled) => !isEnabled),\n        };\n    }\n\n    componentDidMount() {\n        this.manageDropEvent();\n    }\n\n    componentDidUpdate() {\n        this.manageDropEvent();\n    }\n\n    /**\n     * Attaches `drop` and `dragover` events handlers on window\n     *\n     * @method manageDropEvent\n     * @memberof MultiFileUploadModule\n     */\n    manageDropEvent() {\n        const { uploadDisabled, popupVisible, itemsToUpload } = this.state;\n\n        if (!uploadDisabled && !popupVisible && !itemsToUpload.length) {\n            window.addEventListener('drop', this.handleDropOnWindow, false);\n            window.addEventListener('dragover', this.preventDefaultAction, false);\n        }\n    }\n\n    /**\n     * Hides multi file upload popup\n     *\n     * @method hidePopup\n     * @memberof MultiFileUploadModule\n     */\n    hidePopup() {\n        this.setState((state) => Object.assign({}, state, { popupVisible: false }));\n\n        this.props.onPopupClose(this._itemsUploaded);\n    }\n\n    /**\n     * Displays multi file upload popup\n     *\n     * @method showUploadPopup\n     * @memberof MultiFileUploadModule\n     */\n    showUploadPopup() {\n        this.setState((state) =>\n            Object.assign({}, state, {\n                popupVisible: true,\n                itemsToUpload: [],\n            })\n        );\n    }\n\n    /**\n     * Keeps information about uploaded files.\n     * We want to avoid component rerendering so it's stored in an object instance property.\n     *\n     * @method handleAfterUpload\n     * @param {Array} itemsUploaded\n     * @memberof MultiFileUploadModule\n     */\n    handleAfterUpload(itemsUploaded) {\n        this._itemsUploaded = itemsUploaded;\n    }\n\n    /**\n     * Handles dropping on window.\n     * When file/files are dropped onto window the `drop` and `dragover` event handlers are removed.\n     *\n     * @method handleDropOnWindow\n     * @param {Event} event\n     * @memberof MultiFileUploadModule\n     */\n    handleDropOnWindow(event) {\n        this.preventDefaultAction(event);\n\n        const itemsToUpload = this.processUploadedFiles(event);\n\n        // Covers the case when dragging and dropping page elements inside the browser,\n        // like links, images, etc.\n        if (!this.state.allowDropOnWindow || !itemsToUpload.length) {\n            return;\n        }\n\n        window.removeEventListener('drop', this.handleDropOnWindow, false);\n        window.removeEventListener('dragover', this.preventDefaultAction, false);\n\n        this.setState((state) =>\n            Object.assign({}, state, {\n                itemsToUpload,\n                popupVisible: true,\n                allowDropOnWindow: false,\n            })\n        );\n    }\n\n    /**\n     * Extracts information about dropped files\n     *\n     * @method extractDroppedFilesList\n     * @param {Event} event\n     * @returns {undefined|Array}\n     * @memberof MultiFileUploadModule\n     */\n    extractDroppedFilesList(event) {\n        let list;\n\n        if (event.nativeEvent) {\n            list = event.nativeEvent.dataTransfer || event.nativeEvent.target;\n        } else {\n            list = event.dataTransfer;\n        }\n\n        return list;\n    }\n\n    /**\n     * Processes uploaded files and generates an unique file id\n     *\n     * @method processUploadedFiles\n     * @param {Event} event\n     * @returns {Array}\n     * @memberof MultiFileUploadModule\n     */\n    processUploadedFiles(event) {\n        const list = this.extractDroppedFilesList(event);\n\n        return Array.from(list.files).map((file) => ({\n            id: Math.floor(Math.random() * Date.now()),\n            file,\n        }));\n    }\n\n    /**\n     * Prevents default event actions\n     *\n     * @method preventDefaultAction\n     * @param {Event} event\n     * @memberof MultiFileUploadModule\n     */\n    preventDefaultAction(event) {\n        event.preventDefault();\n        event.stopPropagation();\n    }\n\n    /**\n     * Renders multi file upload button,\n     * that allows to open multi file upload popup.\n     *\n     * @method renderBtn\n     * @returns {null|Element}\n     * @memberof MultiFileUploadModule\n     */\n    renderBtn() {\n        if (!this.props.withUploadButton) {\n            return null;\n        }\n\n        const uploadDisabled = this.state.uploadDisabled;\n        const title = Translator.trans(/*@Desc(\"Upload sub-items\")*/ 'multi_file_upload_open_btn.label', {}, 'multi_file_upload');\n        const attrs = { className: 'm-mfu__btn--upload', title, onClick: this.showUploadPopup, type: 'button' };\n\n        if (uploadDisabled) {\n            delete attrs.onClick;\n\n            attrs.disabled = true;\n        }\n\n        return (\n            <button {...attrs}>\n                <Icon name=\"upload\" extraClasses=\"ez-icon--light ez-icon--small-medium\" />\n            </button>\n        );\n    }\n\n    /**\n     * Renders a popup\n     *\n     * @method renderPopup\n     * @returns {null|Element}\n     * @memberof MultiFileUploadModule\n     */\n    renderPopup() {\n        if (!this.state.popupVisible) {\n            return null;\n        }\n\n        const attrs = {\n            ...this.props,\n            visible: true,\n            onClose: this.hidePopup,\n            itemsToUpload: this.state.itemsToUpload,\n            onAfterUpload: this.handleAfterUpload,\n            preventDefaultAction: this.preventDefaultAction,\n            processUploadedFiles: this.processUploadedFiles,\n        };\n\n        return <UploadPopupComponent {...attrs} />;\n    }\n\n    render() {\n        return (\n            <div className=\"m-mfu\">\n                {this.renderBtn()}\n                {this.renderPopup()}\n            </div>\n        );\n    }\n}\n\neZ.addConfig('modules.MultiFileUpload', MultiFileUploadModule);\n\nMultiFileUploadModule.propTypes = {\n    adminUiConfig: PropTypes.shape({\n        multiFileUpload: PropTypes.shape({\n            defaultMappings: PropTypes.arrayOf(PropTypes.object).isRequired,\n            fallbackContentType: PropTypes.object.isRequired,\n            locationMappings: PropTypes.arrayOf(PropTypes.object).isRequired,\n            maxFileSize: PropTypes.number.isRequired,\n        }).isRequired,\n        token: PropTypes.string.isRequired,\n        siteaccess: PropTypes.string.isRequired,\n    }).isRequired,\n    parentInfo: PropTypes.shape({\n        contentTypeIdentifier: PropTypes.string.isRequired,\n        contentTypeId: PropTypes.number.isRequired,\n        locationPath: PropTypes.string.isRequired,\n        language: PropTypes.string.isRequired,\n    }).isRequired,\n    checkCanUpload: PropTypes.func,\n    createFileStruct: PropTypes.func,\n    deleteFile: PropTypes.func,\n    onPopupClose: PropTypes.func,\n    publishFile: PropTypes.func,\n    itemsToUpload: PropTypes.array,\n    withUploadButton: PropTypes.bool,\n    contentCreatePermissionsConfig: PropTypes.object,\n    contentTypesMap: PropTypes.object.isRequired,\n    currentLanguage: PropTypes.string,\n};\n\nMultiFileUploadModule.defaultProps = {\n    checkCanUpload,\n    createFileStruct,\n    deleteFile,\n    onPopupClose: () => {},\n    publishFile,\n    itemsToUpload: [],\n    withUploadButton: true,\n    currentLanguage: '',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/multi-file-upload/multi.file.upload.module.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport TooltipPopup from '../../../common/tooltip-popup/tooltip.popup.component';\nimport DropAreaComponent from '../drop-area/drop.area.component';\nimport UploadListComponent from '../upload-list/upload.list.component';\n\nconst CLASS_SCROLL_DISABLED = 'ez-scroll-disabled';\n\nexport default class UploadPopupModule extends Component {\n    constructor(props) {\n        super(props);\n\n        this.uploadFiles = this.uploadFiles.bind(this);\n\n        this.state = { itemsToUpload: props.itemsToUpload };\n    }\n\n    componentDidMount() {\n        window.document.body.classList.add(CLASS_SCROLL_DISABLED);\n    }\n\n    componentWillUnmount() {\n        window.document.body.classList.remove(CLASS_SCROLL_DISABLED);\n    }\n\n    UNSAFE_componentWillReceiveProps(props) {\n        this.setState((state) => {\n            const stateItems = state.itemsToUpload.filter(\n                (stateItem) => !props.itemsToUpload.find((propItem) => propItem.id === stateItem.id)\n            );\n\n            return { itemsToUpload: [...stateItems, ...props.itemsToUpload] };\n        });\n    }\n\n    /**\n     * Uploads files\n     *\n     * @method uploadFiles\n     * @param {Array} itemsToUpload\n     * @memberof UploadPopupModule\n     */\n    uploadFiles(itemsToUpload) {\n        this.setState(() => ({ itemsToUpload }));\n    }\n\n    render() {\n        const tooltipAttrs = this.props;\n        const listAttrs = {\n            ...tooltipAttrs,\n            itemsToUpload: this.state.itemsToUpload,\n        };\n        const title = Translator.trans(/*@Desc(\"Multi-file upload\")*/ 'upload_popup.title', {}, 'multi_file_upload');\n\n        return (\n            <div className=\"c-upload-popup\">\n                <TooltipPopup title={title} {...tooltipAttrs}>\n                    <DropAreaComponent\n                        onDrop={this.uploadFiles}\n                        maxFileSize={this.props.adminUiConfig.multiFileUpload.maxFileSize}\n                        preventDefaultAction={this.props.preventDefaultAction}\n                        processUploadedFiles={this.props.processUploadedFiles}\n                    />\n                    <UploadListComponent {...listAttrs} />\n                </TooltipPopup>\n            </div>\n        );\n    }\n}\n\nUploadPopupModule.propTypes = {\n    popupTitle: PropTypes.string.isRequired,\n    visible: PropTypes.bool,\n    onUpload: PropTypes.func,\n    onUploadEnd: PropTypes.func,\n    onUploadFail: PropTypes.func,\n    onItemEdit: PropTypes.func,\n    onItemRemove: PropTypes.func,\n    onClose: PropTypes.func,\n    itemsToUpload: PropTypes.array,\n    onAfterUpload: PropTypes.func.isRequired,\n    createFileStruct: PropTypes.func.isRequired,\n    publishFile: PropTypes.func.isRequired,\n    deleteFile: PropTypes.func.isRequired,\n    checkCanUpload: PropTypes.func.isRequired,\n    adminUiConfig: PropTypes.shape({\n        multiFileUpload: PropTypes.shape({\n            defaultMappings: PropTypes.arrayOf(PropTypes.object).isRequired,\n            fallbackContentType: PropTypes.object.isRequired,\n            locationMappings: PropTypes.arrayOf(PropTypes.object).isRequired,\n            maxFileSize: PropTypes.number.isRequired,\n        }).isRequired,\n        token: PropTypes.string.isRequired,\n        siteaccess: PropTypes.string.isRequired,\n    }).isRequired,\n    parentInfo: PropTypes.shape({\n        contentTypeIdentifier: PropTypes.string.isRequired,\n        contentTypeId: PropTypes.number.isRequired,\n        locationPath: PropTypes.string.isRequired,\n        language: PropTypes.string.isRequired,\n    }).isRequired,\n    preventDefaultAction: PropTypes.func.isRequired,\n    processUploadedFiles: PropTypes.func.isRequired,\n    contentTypesMap: PropTypes.object.isRequired,\n    currentLanguage: PropTypes.string,\n};\n\nUploadPopupModule.defaultProps = {\n    visible: true,\n    itemsToUpload: [],\n    currentLanguage: '',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/multi-file-upload/components/upload-popup/upload.popup.component.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { fileSizeToString } from '../../helpers/text.helper';\nimport Icon from '../../../common/icon/icon';\n\nexport default class DropAreaComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this._refFileInput = null;\n\n        this.openFileSelector = this.openFileSelector.bind(this);\n        this.handleUpload = this.handleUpload.bind(this);\n    }\n\n    /**\n     * Opens a browser native file selector\n     *\n     * @method openFileSelector\n     * @param {Event} event\n     * @memberof DropAreaComponent\n     */\n    openFileSelector(event) {\n        event.preventDefault();\n\n        this._refFileInput.click();\n    }\n\n    /**\n     * Handles file upload\n     *\n     * @method handleUpload\n     * @param {Event} event\n     * @memberof DropAreaComponent\n     */\n    handleUpload(event) {\n        this.props.preventDefaultAction(event);\n        this.props.onDrop(this.props.processUploadedFiles(event));\n    }\n\n    componentDidMount() {\n        window.addEventListener('drop', this.props.preventDefaultAction, false);\n        window.addEventListener('dragover', this.props.preventDefaultAction, false);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('drop', this.props.preventDefaultAction, false);\n        window.removeEventListener('dragover', this.props.preventDefaultAction, false);\n    }\n\n    render() {\n        const maxFileSizeMessage = Translator.trans(/*@Desc(\"Max file size:\")*/ 'max_file_size.message', {}, 'multi_file_upload');\n        const dropActionMessage = Translator.trans(\n            /*@Desc(\"Drag and drop your files on browser window or upload them\")*/ 'drop_action.message',\n            {},\n            'multi_file_upload'\n        );\n        const uploadBtnLabel = Translator.trans(/*@Desc(\"Upload sub-items\")*/ 'upload_btn.label', {}, 'multi_file_upload');\n\n        return (\n            <form className=\"c-drop-area\" multiple onDrop={this.handleUpload}>\n                <div className=\"c-drop-area__message c-drop-area__message--main\">{dropActionMessage}</div>\n                <div className=\"c-drop-area__btn-select\" onClick={this.openFileSelector} tabIndex=\"-1\">\n                    <Icon name=\"upload\" extraClasses=\"c-drop-area__icon ez-icon--light ez-icon--small-medium\" />\n                    {uploadBtnLabel}\n                </div>\n                <div className=\"c-drop-area__message c-drop-area__message--filesize\">\n                    ({maxFileSizeMessage} {fileSizeToString(this.props.maxFileSize)})\n                </div>\n                <input\n                    className=\"c-drop-area__input--hidden\"\n                    ref={(ref) => (this._refFileInput = ref)}\n                    id=\"mfu-files\"\n                    type=\"file\"\n                    name=\"files[]\"\n                    hidden\n                    multiple\n                    onChange={this.handleUpload}\n                />\n            </form>\n        );\n    }\n}\n\nDropAreaComponent.propTypes = {\n    onDrop: PropTypes.func.isRequired,\n    maxFileSize: PropTypes.number.isRequired,\n    processUploadedFiles: PropTypes.func.isRequired,\n    preventDefaultAction: PropTypes.func.isRequired,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/multi-file-upload/components/drop-area/drop.area.component.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport UploadItemComponent from './upload.item.component';\n\nexport default class UploadListComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            itemsToUpload: props.itemsToUpload,\n            items: [],\n        };\n    }\n\n    UNSAFE_componentWillReceiveProps(props) {\n        this.setState((state) => {\n            const stateItems = state.itemsToUpload.filter(\n                (stateItem) => !props.itemsToUpload.find((propItem) => propItem.id === stateItem.id)\n            );\n\n            return { itemsToUpload: [...stateItems, ...props.itemsToUpload] };\n        });\n    }\n\n    componentDidUpdate() {\n        this.props.onAfterUpload(this.state.items);\n    }\n\n    /**\n     * Handles after file upload event\n     *\n     * @method handleAfterUpload\n     * @param {Object} item\n     * @memberof UploadListComponent\n     */\n    handleAfterUpload(item) {\n        this.setState((state) => ({\n            itemsToUpload: state.itemsToUpload.filter((data) => data.id !== item.id),\n            items: [...state.items, item],\n        }));\n    }\n\n    /**\n     * Handles after file upload abort event\n     *\n     * @method handleAfterAbort\n     * @param {Object} item\n     * @memberof UploadListComponent\n     */\n    handleAfterAbort(item) {\n        this.setState((state) => {\n            const items = state.items.filter((data) => data.id !== item.id);\n            const itemsToUpload = state.itemsToUpload.filter((data) => data.id !== item.id);\n\n            return Object.assign({}, state, {\n                uploaded: items.length,\n                total: items.length + itemsToUpload.length,\n                itemsToUpload,\n                items,\n            });\n        });\n    }\n\n    /**\n     * Handles after file delete event\n     *\n     * @method handleAfterDelete\n     * @param {Object} item\n     * @memberof UploadListComponent\n     */\n    handleAfterDelete(item) {\n        this.setState((state) => {\n            const items = state.items.filter((data) => data.id !== item.id);\n            const itemsToUpload = state.itemsToUpload.filter((data) => data.id !== item.id);\n\n            return Object.assign({}, state, {\n                uploaded: items.length,\n                total: items.length + itemsToUpload.length,\n                itemsToUpload,\n                items,\n            });\n        });\n    }\n\n    /**\n     * Renders an item to upload\n     *\n     * @method renderItemToUpload\n     * @param {Object} item\n     * @memberof UploadListComponent\n     * @returns {Element}\n     */\n    renderItemToUpload(item) {\n        return this.renderItem(item, {\n            isUploaded: false,\n            createFileStruct: this.props.createFileStruct,\n            publishFile: this.props.publishFile,\n            onAfterAbort: this.handleAfterAbort.bind(this),\n            onAfterUpload: this.handleAfterUpload.bind(this),\n            checkCanUpload: this.props.checkCanUpload,\n        });\n    }\n\n    /**\n     * Renders an uploaded item\n     *\n     * @method renderUploadedItem\n     * @param {Object} item\n     * @memberof UploadListComponent\n     * @returns {Element}\n     */\n    renderUploadedItem(item) {\n        return this.renderItem(item, {\n            isUploaded: true,\n            deleteFile: this.props.deleteFile,\n            onAfterDelete: this.handleAfterDelete.bind(this),\n        });\n    }\n\n    /**\n     * Renders an item\n     *\n     * @method renderItem\n     * @param {Object} item\n     * @param {Object} customAttrs component's custom attrs\n     * @memberof UploadListComponent\n     * @returns {Element}\n     */\n    renderItem(item, customAttrs) {\n        const { adminUiConfig, parentInfo, contentCreatePermissionsConfig, contentTypesMap, currentLanguage } = this.props;\n        const attrs = Object.assign(\n            {\n                key: item.id,\n                data: item,\n                adminUiConfig,\n                parentInfo,\n                contentCreatePermissionsConfig,\n                contentTypesMap,\n                currentLanguage,\n            },\n            customAttrs\n        );\n\n        return <UploadItemComponent {...attrs} />;\n    }\n\n    render() {\n        const { items, itemsToUpload } = this.state;\n        const uploaded = items.length;\n        const total = uploaded + itemsToUpload.length;\n\n        return (\n            <div className=\"c-upload-list\">\n                <div className=\"c-upload-list__title\">\n                    {this.props.uploadedItemsListTitle} ({uploaded}/{total})\n                </div>\n                <div className=\"c-upload-list__items\">\n                    {itemsToUpload.map(this.renderItemToUpload.bind(this))}\n                    {items.map(this.renderUploadedItem.bind(this))}\n                </div>\n            </div>\n        );\n    }\n}\n\nUploadListComponent.propTypes = {\n    itemsToUpload: PropTypes.arrayOf(PropTypes.object),\n    onAfterUpload: PropTypes.func.isRequired,\n    createFileStruct: PropTypes.func.isRequired,\n    publishFile: PropTypes.func.isRequired,\n    deleteFile: PropTypes.func.isRequired,\n    checkCanUpload: PropTypes.func.isRequired,\n    adminUiConfig: PropTypes.shape({\n        multiFileUpload: PropTypes.shape({\n            defaultMappings: PropTypes.arrayOf(PropTypes.object).isRequired,\n            fallbackContentType: PropTypes.object.isRequired,\n            locationMappings: PropTypes.arrayOf(PropTypes.object).isRequired,\n            maxFileSize: PropTypes.number.isRequired,\n        }).isRequired,\n        token: PropTypes.string.isRequired,\n        siteaccess: PropTypes.string.isRequired,\n    }).isRequired,\n    parentInfo: PropTypes.shape({\n        contentTypeIdentifier: PropTypes.string.isRequired,\n        contentTypeId: PropTypes.number.isRequired,\n        locationPath: PropTypes.string.isRequired,\n        language: PropTypes.string.isRequired,\n    }).isRequired,\n    uploadedItemsListTitle: PropTypes.string.isRequired,\n    contentCreatePermissionsConfig: PropTypes.object.isRequired,\n    contentTypesMap: PropTypes.object.isRequired,\n    currentLanguage: PropTypes.string,\n};\n\nUploadListComponent.defaultProps = {\n    itemsToUpload: [],\n    currentLanguage: '',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/multi-file-upload/components/upload-list/upload.list.component.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport ProgressBarComponent from '../progress-bar/progress.bar.component';\nimport { fileSizeToString } from '../../helpers/text.helper';\nimport Icon from '../../../common/icon/icon';\n\nexport default class UploadItemComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.handleFileSizeNotAllowed = this.handleFileSizeNotAllowed.bind(this);\n        this.handleFileTypeNotAllowed = this.handleFileTypeNotAllowed.bind(this);\n        this.handleContentTypeNotAllowed = this.handleContentTypeNotAllowed.bind(this);\n        this.handleEditBtnClick = this.handleEditBtnClick.bind(this);\n        this.handleUploadAbort = this.handleUploadAbort.bind(this);\n        this.handleUploadError = this.handleUploadError.bind(this);\n        this.handleUploadLoad = this.handleUploadLoad.bind(this);\n        this.handleUploadProgress = this.handleUploadProgress.bind(this);\n        this.handleUploadEnd = this.handleUploadEnd.bind(this);\n        this.handleLoadStart = this.handleLoadStart.bind(this);\n        this.handleFileDeleted = this.handleFileDeleted.bind(this);\n        this.abortUploading = this.abortUploading.bind(this);\n        this.deleteFile = this.deleteFile.bind(this);\n        this.contentInfoInput = null;\n        this.contentVersionInfoInput = null;\n        this.contentVersionNoInput = null;\n        this.contentEditBtn = null;\n        this.state = {\n            uploading: false,\n            uploaded: props.isUploaded,\n            disallowed: false,\n            disallowedType: false,\n            disallowedSize: false,\n            disallowedContentType: false,\n            aborted: false,\n            failed: false,\n            deleted: false,\n            progress: 0,\n            xhr: null,\n            struct: props.data.struct || null,\n            totalSize: fileSizeToString(props.data.file.size),\n            uploadedSize: '0',\n        };\n    }\n\n    componentDidMount() {\n        const {\n            data,\n            adminUiConfig,\n            parentInfo,\n            createFileStruct,\n            isUploaded,\n            checkCanUpload,\n            contentCreatePermissionsConfig,\n            currentLanguage,\n        } = this.props;\n\n        this.contentInfoInput = window.document.querySelector('#form_subitems_content_edit_content_info');\n        this.contentVersionInfoInput = window.document.querySelector('#form_subitems_content_edit_version_info_content_info');\n        this.contentVersionNoInput = window.document.querySelector('#form_subitems_content_edit_version_info_version_no');\n        this.contentEditBtn = window.document.querySelector('#form_subitems_content_edit_create');\n\n        if (isUploaded) {\n            return;\n        }\n\n        const config = {\n            ...adminUiConfig.multiFileUpload,\n            contentCreatePermissionsConfig,\n        };\n        const callbacks = {\n            fileTypeNotAllowedCallback: this.handleFileTypeNotAllowed,\n            fileSizeNotAllowedCallback: this.handleFileSizeNotAllowed,\n            contentTypeNotAllowedCallback: this.handleContentTypeNotAllowed,\n        };\n\n        if (!checkCanUpload(data.file, parentInfo, config, callbacks)) {\n            this.setState(() => ({\n                uploading: false,\n                disallowed: true,\n                uploaded: false,\n                aborted: false,\n                failed: true,\n            }));\n\n            return;\n        }\n\n        createFileStruct(data.file, {\n            parentInfo,\n            config: adminUiConfig,\n            languageCode: currentLanguage,\n        }).then(this.initPublishFile.bind(this, adminUiConfig));\n    }\n\n    /**\n     * Initializes file-based content publishing\n     *\n     * @method initPublishFile\n     * @param {Object} restInfo config object containing token and siteaccess properties\n     * @param {Object} struct\n     * @memberof UploadItemComponent\n     */\n    initPublishFile({ token, siteaccess }, struct) {\n        this.props.publishFile(\n            { struct, token, siteaccess },\n            {\n                upload: {\n                    onabort: this.handleUploadAbort,\n                    onerror: this.handleUploadError,\n                    onload: this.handleUploadLoad,\n                    onprogress: this.handleUploadProgress,\n                },\n                onloadstart: this.handleLoadStart,\n                onerror: this.handleUploadError,\n            },\n            this.handleUploadEnd\n        );\n    }\n\n    /**\n     * Handles the case when a file cannot be upload because of file type\n     *\n     * @method handleFileTypeNotAllowed\n     * @memberof UploadItemComponent\n     */\n    handleFileTypeNotAllowed() {\n        this.setState(() => ({\n            uploading: false,\n            disallowed: true,\n            disallowedType: true,\n            disallowedSize: false,\n            disallowedContentType: false,\n            uploaded: false,\n            aborted: false,\n            failed: true,\n        }));\n    }\n\n    /**\n     * Handles the case when a file cannot be upload because of file size\n     *\n     * @method handleFileSizeNotAllowed\n     * @memberof UploadItemComponent\n     */\n    handleFileSizeNotAllowed() {\n        this.setState(() => ({\n            uploading: false,\n            disallowed: true,\n            disallowedType: false,\n            disallowedSize: true,\n            disallowedContentType: false,\n            uploaded: false,\n            aborted: false,\n            failed: true,\n        }));\n    }\n\n    handleContentTypeNotAllowed() {\n        this.setState(() => ({\n            uploading: false,\n            disallowed: true,\n            disallowedType: false,\n            disallowedSize: false,\n            disallowedContentType: true,\n            uploaded: false,\n            aborted: false,\n            failed: true,\n        }));\n    }\n\n    /**\n     * Handles the upload load start event\n     *\n     * @method handleLoadStart\n     * @param {Event} event\n     * @memberof UploadItemComponent\n     */\n    handleLoadStart(event) {\n        this.setState(() => ({\n            uploading: true,\n            disallowed: false,\n            disallowedType: false,\n            disallowedSize: false,\n            disallowedContentType: false,\n            uploaded: false,\n            aborted: false,\n            failed: false,\n            xhr: event.target,\n        }));\n    }\n\n    /**\n     * Handles the upload abort event\n     *\n     * @method handleUploadAbort\n     * @memberof UploadItemComponent\n     */\n    handleUploadAbort() {\n        this.setState(() => ({\n            uploading: false,\n            disallowed: false,\n            disallowedType: false,\n            disallowedSize: false,\n            disallowedContentType: false,\n            uploaded: false,\n            aborted: true,\n            failed: false,\n        }));\n    }\n\n    /**\n     * Handles the upload error event\n     *\n     * @method handleUploadError\n     * @memberof UploadItemComponent\n     */\n    handleUploadError() {\n        this.setState((state) => ({\n            uploading: false,\n            disallowed: state.disallowed,\n            disallowedSize: state.disallowedSize,\n            disallowedType: state.disallowedType,\n            disallowedContentType: state.disallowedContentType,\n            uploaded: false,\n            aborted: state.aborted,\n            failed: true,\n        }));\n    }\n\n    /**\n     * Handles the upload load event\n     *\n     * @method handleUploadLoad\n     * @memberof UploadItemComponent\n     */\n    handleUploadLoad() {\n        this.setState(() => ({\n            uploading: false,\n            disallowed: false,\n            disallowedType: false,\n            disallowedSize: false,\n            disallowedContentType: false,\n            uploaded: true,\n            aborted: false,\n            failed: false,\n        }));\n    }\n\n    /**\n     * Handles the upload progress event\n     *\n     * @method handleUploadProgress\n     * @param {Event} event\n     * @memberof UploadItemComponent\n     */\n    handleUploadProgress(event) {\n        const fraction = event.loaded / event.total;\n        const progress = parseInt(fraction * 100, 10);\n\n        this.setState(() => ({\n            uploadedSize: fileSizeToString(fraction * parseInt(this.props.data.file.size, 10)),\n            uploading: true,\n            disallowed: false,\n            disallowedType: false,\n            disallowedSize: false,\n            disallowedContentType: false,\n            uploaded: false,\n            aborted: false,\n            failed: false,\n            progress,\n        }));\n    }\n\n    /**\n     * Handles the upload end event\n     *\n     * @method handleUploadEnd\n     * @memberof UploadItemComponent\n     */\n    handleUploadEnd() {\n        this.setState(\n            (state) => {\n                const struct = JSON.parse(state.xhr.response);\n\n                return {\n                    struct,\n                    uploading: false,\n                    disallowed: false,\n                    disallowedType: false,\n                    disallowedSize: false,\n                    disallowedContentType: false,\n                    uploaded: true,\n                    aborted: false,\n                    failed: false,\n                };\n            },\n            () => {\n                const data = this.props.data;\n\n                this.props.onAfterUpload({ ...data, struct: this.state.struct });\n            }\n        );\n    }\n\n    /**\n     * Aborts file upload\n     *\n     * @method abortUploading\n     * @memberof UploadItemComponent\n     */\n    abortUploading() {\n        this.state.xhr.abort();\n        this.props.onAfterAbort(this.props.data);\n    }\n\n    /**\n     * Deletes a file\n     *\n     * @method deleteFile\n     * @memberof UploadItemComponent\n     */\n    deleteFile() {\n        this.setState(\n            () => ({ deleted: true }),\n            () => this.props.deleteFile(this.props.adminUiConfig, this.state.struct, this.handleFileDeleted)\n        );\n    }\n\n    /**\n     * Handles the file deleted event\n     *\n     * @method handleFileDeleted\n     * @memberof UploadItemComponent\n     */\n    handleFileDeleted() {\n        this.props.onAfterDelete(this.props.data);\n    }\n\n    /**\n     * Returns content type identifier\n     * based on Content object returned from server after upload\n     *\n     * @method getContentTypeIdentifier\n     * @memberof UploadItemComponent\n     * @returns {String|null}\n     */\n    getContentTypeIdentifier() {\n        const { contentTypesMap, data } = this.props;\n\n        if (!data.struct || !data.struct.Content) {\n            return null;\n        }\n\n        const contentTypeHref = data.struct.Content.ContentType._href;\n        const contentType = contentTypesMap ? contentTypesMap[contentTypeHref] : null;\n        const contentTypeIdentifier = contentType ? contentType.identifier : null;\n\n        return contentTypeIdentifier;\n    }\n\n    /**\n     * Renders an icon of a content type\n     *\n     * @method renderIcon\n     * @returns {JSX.Element|null}\n     */\n    renderIcon() {\n        const contentTypeIdentifier = this.getContentTypeIdentifier();\n\n        if (!contentTypeIdentifier) {\n            return null;\n        }\n\n        const contentTypeIconUrl = eZ.helpers.contentType.getContentTypeIconUrl(contentTypeIdentifier);\n\n        return <Icon customPath={contentTypeIconUrl} extraClasses=\"ez-icon--small-medium\" />;\n    }\n\n    /**\n     * Renders a progress bar\n     *\n     * @method renderProgressBar\n     * @memberof UploadItemComponent\n     * @returns {null|Element}\n     */\n    renderProgressBar() {\n        const { uploaded, aborted, progress, totalSize, uploadedSize, disallowed } = this.state;\n\n        if (this.props.isUploaded || uploaded || aborted || disallowed) {\n            return null;\n        }\n\n        return <ProgressBarComponent progress={progress} uploaded={uploadedSize} total={totalSize} />;\n    }\n\n    /**\n     * Renders an error message\n     *\n     * @method renderErrorMessage\n     * @memberof UploadItemComponent\n     * @returns {null|Element}\n     */\n    renderErrorMessage() {\n        const { uploaded, aborted, disallowedType, disallowedSize, failed, uploading, disallowedContentType } = this.state;\n        const isError = !uploaded && !aborted && (disallowedSize || disallowedType || disallowedContentType) && failed && !uploading;\n        const cannotUploadMessage = Translator.trans(/*@Desc(\"Cannot upload file\")*/ 'cannot_upload.message', {}, 'multi_file_upload');\n        const disallowedTypeMessage = Translator.trans(\n            /*@Desc(\"File type is not allowed\")*/ 'disallowed_type.message',\n            {},\n            'multi_file_upload'\n        );\n        const disallowedSizeMessage = Translator.trans(\n            /*@Desc(\"File size is not allowed\")*/ 'disallowed_size.message',\n            {},\n            'multi_file_upload'\n        );\n        const disallowedContentTypeMessage = Translator.trans(\n            /*@Desc(\"You do not have permission to create this content item\")*/ 'disallowed_content_type.message',\n            {},\n            'multi_file_upload'\n        );\n        let msg = cannotUploadMessage;\n\n        if (disallowedType) {\n            msg = disallowedTypeMessage;\n        }\n\n        if (disallowedSize) {\n            msg = disallowedSizeMessage;\n        }\n\n        if (disallowedContentType) {\n            msg = disallowedContentTypeMessage;\n        }\n\n        return isError ? <div className=\"c-upload-list-item__message c-upload-list-item__message--error\">{msg}</div> : null;\n    }\n\n    /**\n     * Renders an error message\n     *\n     * @method renderErrorMessage\n     * @memberof UploadItemComponent\n     * @returns {null|Element}\n     */\n    renderSuccessMessage() {\n        const { uploaded, aborted, disallowedSize, disallowedType, failed, uploading } = this.state;\n        const isSuccess = uploaded && !aborted && !(disallowedSize || disallowedType) && !failed && !uploading;\n        const message = Translator.trans(/*@Desc(\"Uploaded\")*/ 'upload.success.message', {}, 'multi_file_upload');\n\n        return isSuccess ? <div className=\"c-upload-list-item__message c-upload-list-item__message--success\">{message}</div> : null;\n    }\n\n    /**\n     * Renders an abort upload button\n     *\n     * @method renderAbortBtn\n     * @memberof UploadItemComponent\n     * @returns {null|Element}\n     */\n    renderAbortBtn() {\n        const { uploaded, aborted, disallowedSize, disallowedType, failed, uploading } = this.state;\n        const canAbort = !uploaded && !aborted && !disallowedSize && !disallowedType && !failed && uploading;\n\n        if (!canAbort) {\n            return null;\n        }\n\n        const label = Translator.trans(/*@Desc(\"Abort\")*/ 'abort.label', {}, 'multi_file_upload');\n\n        return (\n            <div\n                className=\"c-upload-list-item__action c-upload-list-item__action--abort\"\n                onClick={this.abortUploading}\n                title={label}\n                tabIndex=\"-1\">\n                <Icon name=\"circle-close\" extraClasses=\"ez-icon--small-medium\" />\n            </div>\n        );\n    }\n\n    /**\n     * Handles the edit button click event. Fills in the hidden form to redirect a user to a correct content edit location.\n     *\n     * @method handleEditBtnClick\n     * @memberof UploadItemComponent\n     * @param {Event} event\n     */\n    handleEditBtnClick(event) {\n        event.preventDefault();\n\n        const { struct } = this.state;\n        const content = struct.Content;\n        const contentId = content._id;\n        const languageCode = content.CurrentVersion.Version.VersionInfo.VersionTranslationInfo.Language['0'].languageCode;\n        const versionNo = content.CurrentVersion.Version.VersionInfo.versionNo;\n\n        this.contentInfoInput.value = contentId;\n        this.contentVersionInfoInput.value = contentId;\n        this.contentVersionNoInput.value = versionNo;\n        window.document.querySelector(`#form_subitems_content_edit_language_${languageCode}`).checked = true;\n        this.contentEditBtn.click();\n    }\n\n    /**\n     * Renders an edit content button\n     *\n     * @method renderEditBtn\n     * @memberof UploadItemComponent\n     * @returns {null|Element}\n     */\n    renderEditBtn() {\n        const { uploaded, aborted, disallowedSize, disallowedType, failed, uploading } = this.state;\n        const canEdit = this.props.isUploaded || (uploaded && !aborted && !(disallowedSize || disallowedType) && !failed && !uploading);\n\n        if (!canEdit) {\n            return null;\n        }\n\n        const label = Translator.trans(/*@Desc(\"Edit\")*/ 'edit.label', {}, 'multi_file_upload');\n\n        return (\n            <div\n                className=\"c-upload-list-item__action c-upload-list-item__action--edit\"\n                title={label}\n                onClick={this.handleEditBtnClick}\n                tabIndex=\"-1\">\n                <Icon name=\"edit\" extraClasses=\"ez-icon--small-medium\" />\n            </div>\n        );\n    }\n\n    /**\n     * Renders an delete content button\n     *\n     * @method renderDeleteBtn\n     * @memberof UploadItemComponent\n     * @returns {null|Element}\n     */\n    renderDeleteBtn() {\n        const { uploaded, aborted, disallowedSize, disallowedType, failed, uploading } = this.state;\n        const canDelete = this.props.isUploaded || (uploaded && !aborted && !(disallowedSize || disallowedType) && !failed && !uploading);\n\n        if (!canDelete) {\n            return null;\n        }\n\n        const label = Translator.trans(/*@Desc(\"Delete\")*/ 'delete.label', {}, 'multi_file_upload');\n\n        return (\n            <div\n                className=\"c-upload-list-item__action c-upload-list-item__action--delete\"\n                onClick={this.deleteFile}\n                title={label}\n                tabIndex=\"-1\">\n                <Icon name=\"trash\" extraClasses=\"ez-icon--small-medium\" />\n            </div>\n        );\n    }\n\n    render() {\n        if (this.state.deleted) {\n            return null;\n        }\n\n        return (\n            <div className=\"c-upload-list-item\">\n                <div className=\"c-upload-list-item__icon-wrapper\">{this.renderIcon()}</div>\n                <div className=\"c-upload-list-item__meta\">\n                    <div className=\"c-upload-list-item__name\">{this.props.data.file.name}</div>\n                    <div className=\"c-upload-list-item__size\">{this.state.uploaded ? this.state.totalSize : ''}</div>\n                </div>\n                <div className=\"c-upload-list-item__info\">\n                    {this.renderErrorMessage()}\n                    {this.renderSuccessMessage()}\n                    {this.renderProgressBar()}\n                </div>\n                <div className=\"c-upload-list-item__actions\">\n                    {this.renderAbortBtn()}\n                    {this.renderEditBtn()}\n                    {this.renderDeleteBtn()}\n                </div>\n            </div>\n        );\n    }\n}\n\nUploadItemComponent.propTypes = {\n    data: PropTypes.object.isRequired,\n    onAfterUpload: PropTypes.func.isRequired,\n    onAfterAbort: PropTypes.func.isRequired,\n    onAfterDelete: PropTypes.func.isRequired,\n    isUploaded: PropTypes.bool.isRequired,\n    createFileStruct: PropTypes.func.isRequired,\n    publishFile: PropTypes.func.isRequired,\n    deleteFile: PropTypes.func.isRequired,\n    checkCanUpload: PropTypes.func.isRequired,\n    adminUiConfig: PropTypes.shape({\n        multiFileUpload: PropTypes.shape({\n            defaultMappings: PropTypes.arrayOf(PropTypes.object).isRequired,\n            fallbackContentType: PropTypes.object.isRequired,\n            locationMappings: PropTypes.arrayOf(PropTypes.object).isRequired,\n            maxFileSize: PropTypes.number.isRequired,\n        }).isRequired,\n        token: PropTypes.string.isRequired,\n        siteaccess: PropTypes.string.isRequired,\n    }).isRequired,\n    parentInfo: PropTypes.shape({\n        contentTypeIdentifier: PropTypes.string.isRequired,\n        contentTypeId: PropTypes.number.isRequired,\n        locationPath: PropTypes.string.isRequired,\n        language: PropTypes.string.isRequired,\n    }).isRequired,\n    contentCreatePermissionsConfig: PropTypes.object,\n    contentTypesMap: PropTypes.object.isRequired,\n    currentLanguage: PropTypes.string,\n};\n\nUploadItemComponent.defaultProps = {\n    isUploaded: false,\n    currentLanguage: '',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/multi-file-upload/components/upload-list/upload.item.component.js","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ProgressBarComponent = (props) => {\n    return (\n        <div className=\"c-progress-bar\">\n            <div className=\"c-progress-bar__value\" style={{ width: `${props.progress}%` }} />\n            <div className=\"c-progress-bar__label\">{`${props.progress}%`}</div>\n            <div className=\"c-progress-bar__uploaded\">\n                {props.uploaded} of {props.total}\n            </div>\n        </div>\n    );\n};\n\nProgressBarComponent.propTypes = {\n    progress: PropTypes.number.isRequired,\n    uploaded: PropTypes.string.isRequired,\n    total: PropTypes.string.isRequired,\n};\n\nexport default ProgressBarComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/multi-file-upload/components/progress-bar/progress.bar.component.js","/**\n * Handles ready state change of request\n *\n * @function handleOnReadyStateChange\n * @param {XMLHttpRequest} xhr\n * @param {Function} onSuccess\n * @param {Function} onError\n */\nconst handleOnReadyStateChange = (xhr, onSuccess, onError) => {\n    if (xhr.readyState !== 4) {\n        return;\n    }\n\n    if (xhr.status === 0 && xhr.statusText === '') {\n        // request aborted\n        return;\n    }\n\n    if (xhr.status >= 400 || !xhr.status) {\n        onError(xhr);\n\n        return;\n    }\n\n    onSuccess(JSON.parse(xhr.response));\n};\n\n/**\n * Handles request response\n *\n * @function handleRequestResponse\n * @param {Response} response\n * @returns {String|Response}\n */\nconst handleRequestResponse = (response) => {\n    if (!response.ok) {\n        throw Error(response.text());\n    }\n\n    return response;\n};\n\n/**\n * Read file handler\n *\n * @function readFile\n * @param {File} file\n * @param {Function} resolve\n * @param {Function} reject\n */\nconst readFile = function(file, resolve, reject) {\n    this.addEventListener('load', () => resolve({ fileReader: this, file }), false);\n    this.addEventListener('error', () => reject(), false);\n    this.readAsDataURL(file);\n};\n\n/**\n * Finds a content type mapping based on a file type\n *\n * @function findFileTypeMapping\n * @param {Array} mappings\n * @param {File} file\n * @returns {Object|undefined}\n */\nconst findFileTypeMapping = (mappings, file) => mappings.find((item) => item.mimeTypes.find((type) => type === file.type));\n\n/**\n * Checks if file's MIME Type is allowed\n *\n * @function isMimeTypeAllowed\n * @param {Array} mappings\n * @param {File} file\n * @returns {Boolean}\n */\nconst isMimeTypeAllowed = (mappings, file) => !!findFileTypeMapping(mappings, file);\n\n/**\n * Checks if file type is allowed\n *\n * @function checkFileTypeAllowed\n * @param {File} file\n * @param {Object} locationMapping\n * @returns {Boolean}\n */\nconst checkFileTypeAllowed = (file, locationMapping) => (!locationMapping ? true : isMimeTypeAllowed(locationMapping.mappings, file));\n\n/**\n * Detects a content type for a given file\n *\n * @function detectContentTypeMapping\n * @param {File} file\n * @param {Object} parentInfo\n * @param {Object} config\n * @returns {Object} detected content type config\n */\nconst detectContentTypeMapping = (file, parentInfo, config) => {\n    const locationMapping = config.locationMappings.find((item) => item.contentTypeIdentifier === parentInfo.contentTypeIdentifier);\n    const mappings = locationMapping ? locationMapping.mappings : config.defaultMappings;\n\n    return findFileTypeMapping(mappings, file) || config.fallbackContentType;\n};\n\n/**\n * Gets content type identifier\n *\n * @function getContentTypeByIdentifier\n * @param {Object} params params object containing token and siteaccess properties\n * @param {String} identifier content type identifier\n * @returns {Promise}\n */\nconst getContentTypeByIdentifier = ({ token, siteaccess }, identifier) => {\n    const request = new Request(`/api/ezp/v2/content/types?identifier=${identifier}`, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/vnd.ez.api.ContentTypeInfoList+json',\n            'X-Siteaccess': siteaccess,\n            'X-CSRF-Token': token,\n        },\n        credentials: 'same-origin',\n        mode: 'cors',\n    });\n\n    return fetch(request).then(handleRequestResponse);\n};\n\n/**\n * Prepares a ContentCreate struct based on an uploaded file type\n *\n * @function prepareStruct\n * @param {Object} params params object containing parentInfo and config properties\n * @param {Object} data file data containing File object and FileReader object\n * @returns {Promise}\n */\nconst prepareStruct = ({ parentInfo, config, languageCode }, data) => {\n    let parentLocation = `/api/ezp/v2/content/locations${parentInfo.locationPath}`;\n\n    parentLocation = parentLocation.endsWith('/') ? parentLocation.slice(0, -1) : parentLocation;\n\n    const mapping = detectContentTypeMapping(data.file, parentInfo, config.multiFileUpload);\n\n    return getContentTypeByIdentifier(config, mapping.contentTypeIdentifier)\n        .then((response) => response.json())\n        .catch(() => window.eZ.helpers.notification.showErrorNotification('Cannot get content type by identifier'))\n        .then((response) => {\n            const fields = [\n                { fieldDefinitionIdentifier: mapping.nameFieldIdentifier, fieldValue: data.file.name },\n                {\n                    fieldDefinitionIdentifier: mapping.contentFieldIdentifier,\n                    fieldValue: { fileName: data.file.name, data: data.fileReader.result.replace(/^.*;base64,/, '') },\n                },\n            ];\n\n            const struct = {\n                ContentCreate: {\n                    ContentType: { _href: response.ContentTypeInfoList.ContentType[0]._href },\n                    mainLanguageCode: languageCode || parentInfo.language,\n                    LocationCreate: { ParentLocation: { _href: parentLocation }, sortField: 'PATH', sortOrder: 'ASC' },\n                    Section: null,\n                    alwaysAvailable: true,\n                    remoteId: null,\n                    modificationDate: new Date().toISOString(),\n                    fields: { field: fields },\n                },\n            };\n\n            return struct;\n        })\n        .catch(() => window.eZ.helpers.notification.showErrorNotification('Cannot create content structure'));\n};\n\n/**\n * Creates a content draft\n *\n * @function createDraft\n * @param {Object} params params object containing struct, token and siteaccess properties\n * @param {Object} requestEventHandlers object containing a list of callbacks\n * @returns {Promise}\n */\nconst createDraft = ({ struct, token, siteaccess }, requestEventHandlers) => {\n    const xhr = new XMLHttpRequest();\n    const body = JSON.stringify(struct);\n    const headers = {\n        Accept: 'application/vnd.ez.api.Content+json',\n        'Content-Type': 'application/vnd.ez.api.ContentCreate+json',\n        'X-CSRF-Token': token,\n        'X-Siteaccess': siteaccess,\n    };\n\n    return new Promise((resolve, reject) => {\n        xhr.open('POST', '/api/ezp/v2/content/objects', true);\n\n        xhr.onreadystatechange = handleOnReadyStateChange.bind(null, xhr, resolve, reject);\n\n        if (requestEventHandlers && Object.keys(requestEventHandlers).length) {\n            const uploadEvents = requestEventHandlers.upload;\n\n            if (uploadEvents && Object.keys(uploadEvents).length) {\n                xhr.upload.onabort = uploadEvents.onabort;\n                xhr.upload.onerror = reject;\n                xhr.upload.onload = uploadEvents.onload;\n                xhr.upload.onprogress = uploadEvents.onprogress;\n                xhr.upload.ontimeout = uploadEvents.ontimeout;\n            }\n\n            xhr.onerror = reject;\n            xhr.onloadstart = requestEventHandlers.onloadstart;\n        }\n\n        for (let headerType in headers) {\n            if (headers.hasOwnProperty(headerType)) {\n                xhr.setRequestHeader(headerType, headers[headerType]);\n            }\n        }\n\n        xhr.send(body);\n    });\n};\n\n/**\n * Publishes a content draft\n *\n * @function publishDraft\n * @param {Object} params params object containing token and siteaccess properties\n * @param {Object} response object containing created draft struct\n * @returns {Promise}\n */\nconst publishDraft = ({ token, siteaccess }, response) => {\n    if (!response || !response.hasOwnProperty('Content')) {\n        return Promise.reject('Cannot publish content based on an uploaded file');\n    }\n\n    const request = new Request(response.Content.CurrentVersion.Version._href, {\n        method: 'POST',\n        headers: {\n            'X-Siteaccess': siteaccess,\n            'X-CSRF-Token': token,\n            'X-HTTP-Method-Override': 'PUBLISH',\n        },\n        mode: 'cors',\n        credentials: 'same-origin',\n    });\n\n    return fetch(request).then(handleRequestResponse);\n};\n\n/**\n * Checks whether a content based on an uploaded file can be created\n *\n * @function canCreateContent\n * @param {File} file\n * @param {Object} parentInfo parent info hash\n * @param {Object} config multi file upload config\n * @returns {Boolean}\n */\nconst canCreateContent = (file, parentInfo, config) => {\n    if (!config.hasOwnProperty('contentCreatePermissionsConfig') || !config.contentCreatePermissionsConfig) {\n        return true;\n    }\n\n    const contentTypeConfig = detectContentTypeMapping(file, parentInfo, config);\n\n    return config.contentCreatePermissionsConfig[contentTypeConfig.contentTypeIdentifier];\n};\n\n/**\n * Checks if a file can be uploaded\n *\n * @function checkCanUpload\n * @param {File} file\n * @param {Object} parentInfo parent info hash\n * @param {Object} config multi file upload config\n * @param {Object} callbacks a list of callbacks\n * @returns {Boolean}\n */\nexport const checkCanUpload = (file, parentInfo, config, callbacks) => {\n    const locationMapping = config.locationMappings.find((item) => item.contentTypeIdentifier === parentInfo.contentTypeIdentifier);\n\n    if (!canCreateContent(file, parentInfo, config)) {\n        callbacks.contentTypeNotAllowedCallback();\n\n        return false;\n    }\n\n    if (!checkFileTypeAllowed(file, locationMapping)) {\n        callbacks.fileTypeNotAllowedCallback();\n\n        return false;\n    }\n\n    if (file.size > config.maxFileSize) {\n        callbacks.fileSizeNotAllowedCallback();\n\n        return false;\n    }\n\n    return true;\n};\n\n/**\n * Creates a ContentCreate struct based on a file\n *\n * @function createFileStruct\n * @param {File} file\n * @param {Object} params struct params\n * @returns {Promise}\n */\nexport const createFileStruct = (file, params) => new Promise(readFile.bind(new FileReader(), file)).then(prepareStruct.bind(null, params));\n\n/**\n * Publishes file\n *\n * @function publishFile\n * @param {Object} data file data\n * @param {Object} requestEventHandlers a list of request event handlers\n * @param {Function} callback a success callback\n */\nexport const publishFile = (data, requestEventHandlers, callback) => {\n    createDraft(data, requestEventHandlers)\n        .then(publishDraft.bind(null, data))\n        .then(callback)\n        .catch(() => window.eZ.helpers.notification.showErrorNotification('An error occurred while publishing a file'));\n};\n\n/**\n * Deletes file\n *\n * @function deleteFile\n * @param {Object} systemInfo system info containing: token and siteaccess info.\n * @param {Object} struct Content struct\n * @param {Function} callback file deleted callback\n */\nexport const deleteFile = ({ token, siteaccess }, struct, callback) => {\n    const request = new Request(struct.Content._href, {\n        method: 'DELETE',\n        headers: {\n            'X-Siteaccess': siteaccess,\n            'X-CSRF-Token': token,\n        },\n        mode: 'cors',\n        credentials: 'same-origin',\n    });\n\n    fetch(request)\n        .then(handleRequestResponse)\n        .then(callback)\n        .catch(() => window.eZ.helpers.notification.showErrorNotification('An error occurred while deleting a file'));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/multi-file-upload/services/multi.file.upload.service.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Icon from '../icon/icon';\n\nconst TooltipPopupComponent = (props) => {\n    const attrs = {\n        className: 'c-tooltip-popup',\n        hidden: !props.visible,\n    };\n\n    return (\n        <div {...attrs}>\n            <div className=\"c-tooltip-popup__header\">\n                <div className=\"c-tooltip-popup__title\">{props.title}</div>\n                <div className=\"c-tooltip-popup__close\" onClick={props.onClose} tabIndex=\"-1\">\n                    <Icon name=\"discard\" extraClasses=\"ez-icon--medium\" />\n                </div>\n            </div>\n            <div className=\"c-tooltip-popup__content\">{props.children}</div>\n        </div>\n    );\n};\n\nTooltipPopupComponent.propTypes = {\n    title: PropTypes.string.isRequired,\n    children: PropTypes.node.isRequired,\n    visible: PropTypes.bool.isRequired,\n    onClose: PropTypes.func,\n};\n\nTooltipPopupComponent.defaultProps = {\n    onClose: () => {},\n};\n\nexport default TooltipPopupComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/common/tooltip-popup/tooltip.popup.component.js"],"sourceRoot":""}