!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("prop-types"),require("react-dom"),require("jquery")):"function"==typeof define&&define.amd?define(["react","prop-types","react-dom","jquery"],t):"object"==typeof exports?exports.SubItems=t(require("react"),require("prop-types"),require("react-dom"),require("jquery")):(e.eZ=e.eZ||{},e.eZ.modules=e.eZ.modules||{},e.eZ.modules.SubItems=t(e.React,e.PropTypes,e.ReactDOM,e.jQuery))}("undefined"!=typeof self?self:this,function(e,t,n,i){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(i),o=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(o).concat([a]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(i[o]=!0)}for(a=0;a<e.length;a++){var s=e[a];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var i={},a=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),o=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),s=null,r=0,l=[],c=n(5);function d(e,t){for(var n=0;n<e.length;n++){var a=e[n],o=i[a.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](a.parts[s]);for(;s<a.parts.length;s++)o.parts.push(b(a.parts[s],t))}else{var r=[];for(s=0;s<a.parts.length;s++)r.push(b(a.parts[s],t));i[a.id]={id:a.id,refs:1,parts:r}}}}function u(e,t){for(var n=[],i={},a=0;a<e.length;a++){var o=e[a],s=t.base?o[0]+t.base:o[0],r={css:o[1],media:o[2],sourceMap:o[3]};i[s]?i[s].parts.push(r):n.push(i[s]={id:s,parts:[r]})}return n}function p(e,t){var n=o(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=l[l.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=o(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,a)}}function f(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function m(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),h(t,e.attrs),p(e,t),t}function h(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function b(e,t){var n,i,a,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var l=r++;n=s||(s=m(t)),i=v.bind(null,n,l,!1),a=v.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",h(t,e.attrs),p(e,t),t}(t),i=function(e,t,n){var i=n.css,a=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||o)&&(i=c(i));a&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var s=new Blob([i],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(s),r&&URL.revokeObjectURL(r)}.bind(null,n,t),a=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),i=function(e,t){var n=t.css,i=t.media;i&&e.setAttribute("media",i);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),a=function(){f(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=u(e,t);return d(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var s=n[o];(r=i[s.id]).refs--,a.push(r)}e&&d(u(e,t),t);for(o=0;o<a.length;o++){var r;if(0===(r=a[o]).refs){for(var l=0;l<r.parts.length;l++)r.parts[l]();delete i[r.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function v(e,t,n,i){var a=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=g(t,a);else{var o=document.createTextNode(a),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(0)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const s=e=>{const t=e.customPath?e.customPath:`/bundles/ezplatformadminui/img/ez-icons.svg#${e.name}`;let n="ez-icon";return e.extraClasses&&(n=`${n} ${e.extraClasses}`),i.default.createElement("svg",{className:n},i.default.createElement("use",{xlinkHref:t}))};s.propTypes={extraClasses:a.default.string.isRequired,name:a.default.string,customPath:a.default.string},s.defaultProps={customPath:null,name:null},t.default=s},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var a,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(a=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:i+o.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getBasicRequestInit=(({token:e,siteaccess:t})=>({headers:{"X-Siteaccess":t,"X-CSRF-Token":e},mode:"same-origin",credentials:"same-origin"}));const i=t.handleRequestError=(e=>{if(!e.ok)throw Error(e.statusText);return e});t.handleRequestResponse=(e=>i(e).json()),t.handleRequestResponseStatus=(e=>i(e).status)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e=>{let t;if("object"!=typeof e)return e;if(!e)return e;if("[object Array]"===Object.prototype.toString.apply(e)){t=[];for(let n=0;n<e.length;n++)t[n]=i(e[n]);return t}t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=i(e[n]));return t};t.default=i},,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(0),o=v(a),s=v(n(19)),r=v(n(1)),l=v(n(20)),c=v(n(24)),d=v(n(39)),u=v(n(43)),p=v(n(46)),f=v(n(48)),m=v(n(4)),h=v(n(7)),b=n(51),g=n(52);function v(e){return e&&e.__esModule?e:{default:e}}n(53);const _="ascending",w="descending",y=_;class x extends a.Component{constructor(e){super(e),this.afterPriorityUpdated=this.afterPriorityUpdated.bind(this),this.loadContentItems=this.loadContentItems.bind(this),this.loadContentTypes=this.loadContentTypes.bind(this),this.updateItemsState=this.updateItemsState.bind(this),this.switchView=this.switchView.bind(this),this.handleItemPriorityUpdate=this.handleItemPriorityUpdate.bind(this),this.toggleItemSelection=this.toggleItemSelection.bind(this),this.toggleAllPageItemsSelection=this.toggleAllPageItemsSelection.bind(this),this.onMoveBtnClick=this.onMoveBtnClick.bind(this),this.closeUdw=this.closeUdw.bind(this),this.onUdwConfirm=this.onUdwConfirm.bind(this),this.onDeleteBtnClick=this.onDeleteBtnClick.bind(this),this.closeBulkDeletePopup=this.closeBulkDeletePopup.bind(this),this.onBulkDeletePopupConfirm=this.onBulkDeletePopupConfirm.bind(this),this.afterBulkDelete=this.afterBulkDelete.bind(this),this.changePage=this.changePage.bind(this),this.changeSorting=this.changeSorting.bind(this),this._refListViewWrapper=o.default.createRef(),this.bulkDeleteModalContainer=null,this.udwContainer=null;const t=this.getDefaultSortClause(e.sortClauses);this.state={activeView:e.activeView,activePageItems:e.items,selectedItems:new Map,contentTypesMap:e.contentTypesMap,totalCount:e.totalCount,offset:e.offset,isDuringBulkOperation:!1,isUdwOpened:!1,isBulkDeletePopupVisible:!1,activePageIndex:0,listViewHeight:null,sortClause:t.name,sortOrder:t.order}}componentDidMount(){this.udwContainer=document.getElementById("react-udw"),this.bulkDeleteModalContainer=document.createElement("div"),this.bulkDeleteModalContainer.classList.add("m-sub-items__bulk-delete-modal-container"),document.body.appendChild(this.bulkDeleteModalContainer)}componentDidUpdate(){var e=this.state;const t=e.activePageIndex,n=e.activePageItems,i=e.totalCount,a=this.props.limit,o=Math.ceil(i/a);t>o-1&&0!==t?this.setState({activePageIndex:o-1}):!n&&this.loadPage(t)}componentWillUnmount(){document.body.removeChild(this.bulkDeleteModalContainer)}getDefaultSortClause(e){const t=Object.keys(e);if(!t.length)return{name:null,order:null};const n=t[0];return{name:n,order:e[n]}}updateListViewHeight(){this.setState(()=>({listViewHeight:this._refListViewWrapper.current.offsetHeight}))}loadPage(e){this.loadLocation(e).then(this.loadContentItems).then(this.loadContentTypes).then(this.updateItemsState).catch(()=>{const e=Translator.trans("page.loading_error.message",{},"sub_items");window.eZ.helpers.notification.showErrorNotification(e)})}loadLocation(e){var t=this.props;const n=t.limit,i=t.loadLocation,a=t.restInfo,o=t.parentLocationId;var s=this.state;const r={locationId:o,limit:n,sortClauses:{[s.sortClause]:s.sortOrder},offset:e*n};return new Promise(e=>i(a,r,e))}loadContentItems(e){var t=this.props;const n=t.loadContentInfo,i=t.restInfo;if(!e||!e.View){const e=Translator.trans("load_content_items.invalid_response_format.error.message",{},"sub_items");throw new Error(e)}const a=e.View.Result.searchHits.searchHit;return new Promise(t=>{const o=a.map(e=>e.value.Location.ContentInfo.Content._id);n(i,o,n=>{const i=e.View.Result.count;t({locations:a,totalCount:i,contentItems:n.View.Result.searchHits.searchHit.map(e=>e.value.Content)})})})}loadContentTypes(e){const t=e.contentItems.map(e=>new Promise(t=>{const n=e.ContentType._href;this.state.contentTypesMap[n]?t({ContentType:this.state.contentTypesMap[n]}):this.props.loadContentType(n,this.props.restInfo,e=>t(e))}));return Promise.all(t).then(t=>(e.contentTypes=t,e))}updateItemsState({locations:e,contentItems:t,totalCount:n,contentTypes:a}){const o=e.map(e=>{const n=e.value.Location,i=t.find(e=>e._id===n.ContentInfo.Content._id);return{location:n,content:i}});this.setState(e=>({activePageItems:o,totalCount:n,contentTypesMap:i({},e.contentTypesMap,this.buildContentTypesMap(a))}))}buildContentTypesMap(e){return e?e.reduce((e,t)=>(e[t.ContentType._href]=t.ContentType,e),{}):{}}updateTotalCountState(e){this.setState(()=>({totalCount:e}))}discardActivePageItems(){this.updateListViewHeight(),this.setState(()=>({activePageItems:null}))}changeSorting(e){this.updateListViewHeight(),this.setState(t=>({sortClause:e,sortOrder:this.getSortOrder(t.sortClause,e,t.sortOrder),activePageItems:null}))}getSortOrder(e,t,n){return t===e?this.getOppositeSortOrder(n):y}getOppositeSortOrder(e){return e===_?w:_}handleItemPriorityUpdate(e){this.props.updateLocationPriority(i({},e,this.props.restInfo),this.afterPriorityUpdated)}afterPriorityUpdated(e){"LocationPriority"!==this.state.sortClause?this.updateItemLocation(e.Location):this.discardActivePageItems()}updateItemLocation(e){this.setState(({activePageItems:t})=>{const n=t.findIndex(t=>t.location.id===e.id);if(-1===n)return null;const i=t[n],a=(0,h.default)(i),o=[...t];return a.location=e,o[n]=a,{activePageItems:o}})}switchView(e){this.setState(()=>({activeView:e}))}toggleItemSelection(e,t){const n=this.state.selectedItems,i=new Map(n),a=e.location.id;t?i.set(a,e):i.delete(a),this.setState(()=>({selectedItems:i}))}toggleAllPageItemsSelection(e){const t=this.state.activePageItems;if(e)this.selectItems(t);else{const e=t.map(e=>e.location.id),n=new Set(e);this.deselectItems(n)}}selectItems(e){const t=this.state.selectedItems,n=e.map(e=>[e.location.id,e]),i=new Map([...t,...n]);this.setState(()=>({selectedItems:i}))}deselectItems(e){const t=this.state.selectedItems,n=new Map([...t].filter(([t,n])=>!e.has(t)));this.setState(()=>({selectedItems:n}))}deselectAllItems(){this.setState(()=>({selectedItems:new Map}))}toggleBulkOperationStatusState(e){this.setState(()=>({isDuringBulkOperation:e}))}onMoveBtnClick(){this.toggleUdw(!0)}bulkMove(e){this.toggleBulkOperationStatusState(!0);const t=this.props.restInfo,n=this.state.selectedItems,i=[...n.values()].map(({location:e})=>e);(0,g.bulkMoveLocations)(t,i,e._href,this.afterBulkMove.bind(this,n,e))}afterBulkMove(e,t,n,i){const a=this.state.totalCount;if(this.updateTotalCountState(a-n.length),this.deselectAllItems(),this.discardActivePageItems(),this.toggleBulkOperationStatusState(!1),i.length){const t=Translator.trans("bulk_move.error.modal.table_title",{itemsCount:i.length},"sub_items"),a=Translator.trans("bulk_move.error.message",{notMovedCount:i.length,totalCount:n.length+i.length},"sub_items");this.handleBulkOperationFailedNotification(e,i,t,a)}if(n.length){const e=Translator.trans("bulk_move.success.message",{locationName:t.ContentInfo.Content.Name,locationHref:this.props.generateLink(t.id)},"sub_items");window.eZ.helpers.notification.showSuccessNotification(e)}}toggleUdw(e){this.setState(()=>({isUdwOpened:e}))}closeUdw(){this.toggleUdw(!1)}onUdwConfirm([e]){this.closeUdw(),this.bulkMove(e)}renderUdw(){if(!this.state.isUdwOpened)return null;const e=window.eZ.modules.UniversalDiscovery;var t=this.props;const n=t.restInfo,a=t.parentLocationId,r=t.udwConfigBulkMoveItems,l=[a,...[...this.state.selectedItems.values()].map(({location:e})=>e.id)],c=Translator.trans("udw.choose_location.title",{},"sub_items"),d=i({title:c,restInfo:n,onCancel:this.closeUdw,onConfirm:this.onUdwConfirm,canSelectContent:({item:e},t)=>{t(!l.includes(e.id))}},r);return s.default.createPortal(o.default.createElement(e,d),this.udwContainer)}onDeleteBtnClick(){this.toggleBulkDeletePopup(!0)}bulkDelete(){this.toggleBulkOperationStatusState(!0);const e=this.props.restInfo,t=this.state.selectedItems,n=[...t.values()].map(({location:e})=>e);(0,g.bulkMoveLocationsToTrash)(e,n,this.afterBulkDelete.bind(this,t))}afterBulkDelete(e,t,n){const i=this.state.totalCount;if(this.updateTotalCountState(i-t.length),this.deselectAllItems(),this.discardActivePageItems(),this.toggleBulkOperationStatusState(!1),n.length){const i=Translator.trans("bulk_delete.error.modal.table_title",{itemsCount:n.length},"sub_items"),a=Translator.trans("bulk_delete.error.message",{notDeletedCount:n.length,totalCount:t.length+n.length},"sub_items");this.handleBulkOperationFailedNotification(e,n,i,a)}else{const e=Translator.trans("bulk_delete.success.message",{},"sub_items");window.eZ.helpers.notification.showSuccessNotification(e)}}toggleBulkDeletePopup(e){this.setState(()=>({isBulkDeletePopupVisible:e}))}closeBulkDeletePopup(){this.toggleBulkDeletePopup(!1)}onBulkDeletePopupConfirm(){this.closeBulkDeletePopup(),this.bulkDelete()}handleBulkOperationFailedNotification(e,t,n,i){const a=this.state.contentTypesMap,o=t.map(({id:t})=>{const n=e.get(t),i=a[n.content.ContentType._href].identifier;return{contentTypeName:window.eZ.adminUiConfig.contentTypeNames[i],contentName:n.content.Name}});window.eZ.helpers.notification.showWarningNotification(i,e=>{const t=e.querySelector(".ez-notification-btn--show-modal");t&&t.addEventListener("click",this.props.showBulkActionFailedModal.bind(null,n,o))})}renderConfirmationPopupFooter(){const e=Translator.trans("bulk_delete.popup.cancel",{},"sub_items"),t=Translator.trans("bulk_delete.popup.confirm",{},"sub_items");return o.default.createElement(a.Fragment,null,o.default.createElement("button",{onClick:this.closeBulkDeletePopup,type:"button",className:"btn btn-secondary btn--no m-sub-items__confirmation-modal-cancel-btn","data-dismiss":"modal"},e),o.default.createElement("button",{onClick:this.onBulkDeletePopupConfirm,type:"button",className:"btn btn-danger font-weight-bold btn--trigger"},t))}renderConfirmationPopup(){const e=this.state.isBulkDeletePopupVisible;if(!e)return null;const t=Translator.trans("bulk_delete.popup.message",{},"sub_items");return s.default.createPortal(o.default.createElement(d.default,{onClose:this.closeBulkDeletePopup,isVisible:e,isLoading:!1,size:"medium",footerChildren:this.renderConfirmationPopupFooter(),noHeader:!0},o.default.createElement("div",{className:"m-sub-items__confirmation-modal-body"},t)),this.bulkDeleteModalContainer)}changePage(e){this.updateListViewHeight(),this.setState(()=>({activePageIndex:e,activePageItems:null}))}getPageSelectedLocationsIds(){var e=this.state;const t=e.selectedItems,n=e.activePageItems,i=[...t.keys()],a=[...n.map(e=>e.location.id)];return new Set(a.filter(e=>i.includes(e)))}renderExtraActions(e,t){const n=e.component;return o.default.createElement(n,i({key:t,className:"m-sub-items__action"},e.attrs))}renderPaginationInfo(){var e=this.state;const t=e.totalCount,n=e.activePageItems,i=n?n.length:0,a=Translator.trans("viewing_message",{viewingCount:i,totalCount:t},"sub_items");return o.default.createElement("div",{className:"m-sub-items__pagination-info",dangerouslySetInnerHTML:{__html:a}})}renderPagination(){const e=this.props.limit,t=this.state.totalCount;if(t<=e)return null;var n=this.state;const i=n.activePageIndex,a=n.activePageItems,s=n.isDuringBulkOperation,r=!!!a||s;return o.default.createElement(p.default,{proximity:1,itemsPerPage:e,activePageIndex:i,totalCount:t,onPageChange:this.changePage,disabled:r})}renderBulkMoveBtn(e){const t=Translator.trans("move_btn.label",{},"sub_items");return o.default.createElement(u.default,{disabled:e,onClick:this.onMoveBtnClick,label:t,type:"move"})}renderBulkDeleteBtn(e){const t=Translator.trans("trash_btn.label",{},"sub_items");return o.default.createElement(u.default,{disabled:e,onClick:this.onDeleteBtnClick,label:t,type:"trash"})}renderSpinner(){if(!!this.state.activePageItems)return null;const e=this.state.listViewHeight,t={height:e&&e>90?e:90};return o.default.createElement("div",{style:t},o.default.createElement("div",{className:"m-sub-items__spinner-wrapper"},o.default.createElement(m.default,{name:"spinner",extraClasses:"m-sub-items__spinner ez-icon--medium ez-spin"})))}renderNoItems(){return this.state.totalCount?null:o.default.createElement(f.default,null)}renderListView(){var e=this.state;const t=e.activePageItems,n=e.sortClause,i=e.sortOrder;if(!!!t)return null;const a=this.getPageSelectedLocationsIds();return o.default.createElement(c.default,{activeView:this.state.activeView,contentTypesMap:this.state.contentTypesMap,handleItemPriorityUpdate:this.handleItemPriorityUpdate,items:t,languages:this.props.languages,handleEditItem:this.props.handleEditItem,generateLink:this.props.generateLink,onItemSelect:this.toggleItemSelection,toggleAllItemsSelect:this.toggleAllPageItemsSelection,selectedLocationsIds:a,onSortChange:this.changeSorting,sortClause:n,sortOrder:i})}render(){const e=Translator.trans("items_list.title",{},"sub_items");var t=this.state;const n=t.selectedItems,i=t.activeView,a=t.totalCount,s=t.isDuringBulkOperation,r=t.activePageItems,c=!n.size||!("table"===i)||!!!r;let d="m-sub-items__list";return s&&(d=`${d} ${d}--processing`),o.default.createElement("div",{className:"m-sub-items"},o.default.createElement("div",{className:"m-sub-items__header"},o.default.createElement("div",{className:"m-sub-items__title"},e," (",this.state.totalCount,")"),o.default.createElement("div",{className:"m-sub-items__actions"},this.props.extraActions.map(this.renderExtraActions),this.renderBulkMoveBtn(c),this.renderBulkDeleteBtn(c)),o.default.createElement(l.default,{onViewChange:this.switchView,activeView:i,isDisabled:!a})),o.default.createElement("div",{ref:this._refListViewWrapper,className:d},this.renderSpinner(),this.renderListView(),this.renderNoItems()),this.renderPaginationInfo(),this.renderPagination(),this.renderUdw(),this.renderConfirmationPopup())}}t.default=x,x.propTypes={parentLocationId:r.default.number.isRequired,restInfo:r.default.shape({token:r.default.string.isRequired,siteaccess:r.default.string.isRequired}).isRequired,loadContentInfo:r.default.func,loadContentType:r.default.func,loadContentTypes:r.default.func,loadLocation:r.default.func,sortClauses:r.default.object,updateLocationPriority:r.default.func,activeView:r.default.string,extraActions:r.default.arrayOf(r.default.shape({component:r.default.func,attrs:r.default.object})),items:r.default.arrayOf(r.default.object),limit:r.default.number,offset:r.default.number,handleEditItem:r.default.func.isRequired,generateLink:r.default.func.isRequired,contentTypesMap:r.default.object,totalCount:r.default.number,languages:r.default.object,udwConfigBulkMoveItems:r.default.object.isRequired,showBulkActionFailedModal:r.default.func.isRequired},x.defaultProps={loadContentInfo:b.loadContentInfo,loadContentType:b.loadContentType,loadContentTypes:b.loadContentTypes,loadLocation:b.loadLocation,sortClauses:{},updateLocationPriority:b.updateLocationPriority,activeView:"table",extraActions:[],languages:window.eZ.adminUiConfig.languages,items:[],limit:parseInt(window.eZ.adminUiConfig.subItems.limit,10),offset:0,contentTypesMap:{},totalCount:0}},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(0)),a=s(n(1)),o=s(n(21));function s(e){return e&&e.__esModule?e:{default:e}}n(22);const r=({onViewChange:e,activeView:t,isDisabled:n})=>{let a="c-grid-switcher";n&&(a=`${a} ${a}--disabled`);const s=Translator.trans("switch_to_list_view.btn.label",{},"sub_items"),r=Translator.trans("switch_to_grid_view.btn.label",{},"sub_items");return i.default.createElement("div",{className:a},i.default.createElement(o.default,{id:"table",icon:"view-list",title:s,onClick:e,activeView:t,isDisabled:n}),i.default.createElement(o.default,{id:"grid",icon:"view-grid",title:r,onClick:e,activeView:t,isDisabled:n}))};r.propTypes={onViewChange:a.default.func.isRequired,activeView:a.default.string.isRequired,isDisabled:a.default.bool.isRequired},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(0)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const s=({id:e,icon:t,title:n,onClick:a,activeView:o,isDisabled:s})=>{const r="c-grid-switcher__option",l={id:e,onClick:()=>a(e),className:r,title:n};return o===e&&(l.className=`${r} ${r}--active`),s&&(l.className=`${l.className} ${r}--disabled`),i.default.createElement("div",l,i.default.createElement("svg",{className:"ez-icon"},i.default.createElement("use",{xlinkHref:`/bundles/ezplatformadminui/img/ez-icons.svg#${t}`})))};s.propTypes={id:a.default.string.isRequired,activeView:a.default.string.isRequired,isDisabled:a.default.bool.isRequired,icon:a.default.string.isRequired,title:a.default.string.isRequired,onClick:a.default.func.isRequired},t.default=s},function(e,t,n){var i=n(23);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".c-grid-switcher,\n.c-grid-switcher * {\n    box-sizing: border-box;\n}\n\n.c-grid-switcher {\n    height: 40px;\n    width: 70px;\n    border: 3px solid #0e77a3;\n    border-radius: 4px;\n    display: flex;\n    overflow: hidden;\n    background: #fff;\n    box-shadow: inset 0 0 2px 0 rgba(26, 53, 71, 0.4);\n    padding: 2px;\n}\n\n.c-grid-switcher__option {\n    flex: 1 1 30px;\n    max-width: 30px;\n    height: 30px;\n    padding: 0;\n    margin: 0;\n    border: 2px solid #fff;\n    background: #fff;\n    color: #0e77a3;\n    transition: all 0.1s ease-in-out;\n    display: flex;\n    justify-content: center;\n    cursor: pointer;\n}\n\n.c-grid-switcher__option:first-of-type {\n    border-radius: 2px 0 0 2px;\n}\n\n.c-grid-switcher__option:last-of-type {\n    border-radius: 0 2px 2px 0;\n}\n\n.c-grid-switcher__option--active {\n    background: #0e77a3;\n}\n\n.c-grid-switcher__option .ez-icon {\n    fill: #0e77a3;\n    margin: auto;\n    width: 18px;\n    height: 18px;\n}\n\n.c-grid-switcher__option--active .ez-icon {\n    fill: #fff;\n}\n\n.c-grid-switcher__option--disabled {\n    pointer-events: none;\n    opacity: 0.5;\n}\n.c-grid-switcher--disabled {\n    cursor: not-allowed;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0)),a=r(n(1)),o=r(n(25)),s=r(n(31));function r(e){return e&&e.__esModule?e:{default:e}}n(37);const l={table:o.default,grid:s.default},c=e=>{const t=l[e.activeView];return i.default.createElement(t,e)};c.propTypes={activeView:a.default.string.isRequired,items:a.default.arrayOf(a.default.object),contentTypesMap:a.default.object.isRequired,handleItemPriorityUpdate:a.default.func.isRequired,languages:a.default.object.isRequired,onItemSelect:a.default.func.isRequired,toggleAllItemsSelect:a.default.func.isRequired,selectedLocationsIds:a.default.instanceOf(Set).isRequired,onSortChange:a.default.func.isRequired,sortClause:a.default.string.isRequired,sortOrder:a.default.string.isRequired},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(0),o=l(a),s=l(n(1)),r=l(n(26));function l(e){return e&&e.__esModule?e:{default:e}}n(29);const c="ContentName",d="DateModified",u="LocationPriority",p={[c]:"name",[d]:"date",[u]:"priority"};class f extends a.Component{constructor(e){super(e),this.sortByName=this.sortByName.bind(this),this.sortByDate=this.sortByDate.bind(this),this.sortByPriority=this.sortByPriority.bind(this),this.renderItem=this.renderItem.bind(this),this.selectAll=this.selectAll.bind(this)}sortByName(){(0,this.props.onSortChange)(c)}sortByDate(){(0,this.props.onSortChange)(d)}sortByPriority(){(0,this.props.onSortChange)(u)}selectAll(e){(0,this.props.toggleAllItemsSelect)(e.target.checked)}renderItem(e){var t=this.props;const n=t.contentTypesMap,a=t.handleItemPriorityUpdate,s=t.handleEditItem,l=t.generateLink,c=t.languages,d=t.onItemSelect,u=t.selectedLocationsIds.has(e.location.id);return o.default.createElement(r.default,i({key:e.location.id},e,{contentTypesMap:n,onItemPriorityUpdate:a,languages:c,handleEditItem:s,generateLink:l,onItemSelect:d,isSelected:u}))}renderHead(){const e="c-table-view__cell",t=`${e}--head`,n=`${e}--sortable`;let i="c-table-view__head";if(!this.props.items.length)return;var a=this.props;const s=a.sortClause,r=a.sortOrder;if(s){i=`${i} ${"ascending"===r?`${i}--sort-asc`:`${i}--sort-desc`} ${`${i}--sort-by-${p[s]}`}`}const l=Translator.trans("items_table.header.name",{},"sub_items"),c=Translator.trans("items_table.header.modified",{},"sub_items"),d=Translator.trans("items_table.header.content_type",{},"sub_items"),u=Translator.trans("items_table.header.priority",{},"sub_items"),f=Translator.trans("items_table.header.translations",{},"sub_items"),m=!!this.props.selectedLocationsIds.size;return o.default.createElement("thead",{className:i},o.default.createElement("tr",{className:"c-table-view__row"},o.default.createElement("td",{className:t},o.default.createElement("input",{type:"checkbox",checked:m,onChange:this.selectAll})),o.default.createElement("td",{className:`${t} ${e}--name ${n}`,onClick:this.sortByName},o.default.createElement("span",{className:"c-table-view__label"},l)),o.default.createElement("td",{className:`${t} ${e}--date ${n}`,onClick:this.sortByDate},o.default.createElement("span",{className:"c-table-view__label"},c)),o.default.createElement("td",{className:t},o.default.createElement("span",{className:"c-table-view__label"},d)),o.default.createElement("td",{className:`${t} ${e}--priority ${n}`,onClick:this.sortByPriority},o.default.createElement("span",{className:"c-table-view__label"},u)),o.default.createElement("td",{className:t,colSpan:2},o.default.createElement("span",{className:"c-table-view__label"},f))))}render(){const e=this.props.items.map(this.renderItem);return o.default.createElement("table",{className:"c-table-view"},this.renderHead(),o.default.createElement("tbody",{className:"c-table-view__body"},e))}}t.default=f,f.propTypes={items:s.default.arrayOf(s.default.object).isRequired,contentTypesMap:s.default.object.isRequired,handleItemPriorityUpdate:s.default.func.isRequired,generateLink:s.default.func.isRequired,handleEditItem:s.default.func.isRequired,languages:s.default.object.isRequired,onItemSelect:s.default.func.isRequired,toggleAllItemsSelect:s.default.func.isRequired,selectedLocationsIds:s.default.instanceOf(Set),onSortChange:s.default.func.isRequired,sortClause:s.default.string.isRequired,sortOrder:s.default.string.isRequired}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(0),o=r(a),s=r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}n(27);class l extends a.PureComponent{constructor(e){super(e),this.storePriorityValue=this.storePriorityValue.bind(this),this.enablePriorityInput=this.enablePriorityInput.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleEdit=this.handleEdit.bind(this),this.onSelectCheckboxChange=this.onSelectCheckboxChange.bind(this),this.state={priorityValue:e.location.priority,priorityInputEnabled:!1,startingPriorityValue:e.location.priority}}enablePriorityInput(){this.setState(()=>({priorityInputEnabled:!0}))}handleCancel(e){e.preventDefault(),this.setState(e=>({priorityInputEnabled:!1,priorityValue:e.startingPriorityValue}))}handleSubmit(e){e.preventDefault(),this.props.onItemPriorityUpdate({location:this.props.location._href,priority:this._refPriorityInput.value}),this.setState(()=>({priorityValue:this._refPriorityInput.value,priorityInputEnabled:!1,startingPriorityValue:this._refPriorityInput.value}))}storePriorityValue(e){e.preventDefault(),this.setState(()=>({priorityValue:this._refPriorityInput.value}))}handleEdit(){this.props.handleEditItem(this.props.content)}renderPriorityCell(){const e={type:"number",defaultValue:this.state.priorityValue,onChange:this.storePriorityValue},t={},n={};return this.state.priorityInputEnabled||(e.disabled=!0,delete e.defaultValue,e.value=this.state.priorityValue,t.onClick=this.enablePriorityInput,t.className="c-table-view-item__inner-wrapper c-table-view-item__inner-wrapper--disabled",n.hidden=!0),o.default.createElement("td",{className:"c-table-view-item__cell--priority"},o.default.createElement("div",i({className:"c-table-view-item__priority-wrapper"},t),o.default.createElement("div",{className:"c-table-view-item__inner-wrapper c-table-view-item__inner-wrapper--input"},o.default.createElement("input",i({className:"c-table-view-item__priority-value",ref:e=>this._refPriorityInput=e},e))),o.default.createElement("div",i({className:"c-table-view-item__priority-actions"},n),o.default.createElement("button",{className:"c-table-view-item__btn--submit",onClick:this.handleSubmit},o.default.createElement("svg",{className:"ez-icon"},o.default.createElement("use",{xlinkHref:"/bundles/ezplatformadminui/img/ez-icons.svg#checkmark"}))),o.default.createElement("button",{className:"c-table-view-item__btn--cancel",onClick:this.handleCancel},o.default.createElement("svg",{className:"ez-icon"},o.default.createElement("use",{xlinkHref:"/bundles/ezplatformadminui/img/ez-icons.svg#discard"}))))))}renderTranslation(e,t){return o.default.createElement("span",{key:t,className:"c-table-view-item__translation"},e)}onSelectCheckboxChange(e){var t=this.props;const n=t.location,i=t.content;(0,t.onItemSelect)({content:i,location:n},e.target.checked)}render(){var e=this.props;const t=e.content,n=e.location,i=e.isSelected,a=e.contentTypesMap,s=e.generateLink,r=e.languages,l=Translator.trans("content_type.not_available.label",{},"sub_items"),c=Translator.trans("edit_item_btn.label",{},"sub_items"),d=window.eZ.helpers.timezone.formatShortDateWithTimezone,u=a[t.ContentType._href],p=u?u.identifier:null,f=p?window.eZ.adminUiConfig.contentTypeNames[p]:l,m={className:"c-table-view-item__link c-table-view-item__text-wrapper",title:t.Name,href:s(n.id)},h=t.CurrentVersion.Version.VersionInfo.VersionTranslationInfo.Language.map(e=>r.mappings[e.languageCode].name);return o.default.createElement("tr",{className:"c-table-view-item"},o.default.createElement("td",{className:"c-table-view-item__cell--checkbox"},o.default.createElement("input",{type:"checkbox",checked:i,onChange:this.onSelectCheckboxChange})),o.default.createElement("td",{className:"c-table-view-item__cell--name"},o.default.createElement("a",m,t.Name)),o.default.createElement("td",{className:"c-table-view-item__cell--modified"},o.default.createElement("div",{className:"c-table-view-item__text-wrapper"},d(new Date(t.lastModificationDate)))),o.default.createElement("td",{className:"c-table-view-item__cell--content-type"},o.default.createElement("div",{className:"c-table-view-item__text-wrapper"},f)),this.renderPriorityCell(),o.default.createElement("td",{className:"c-table-view-item__cell--translations"},h.map(this.renderTranslation)),o.default.createElement("td",{className:"c-table-view-item__cell--actions"},o.default.createElement("div",null,o.default.createElement("span",{title:c,onClick:this.handleEdit,className:"c-table-view-item__btn--edit"},o.default.createElement("div",{className:"c-table-view-item__btn-inner"},o.default.createElement("svg",{className:"ez-icon"},o.default.createElement("use",{xlinkHref:"/bundles/ezplatformadminui/img/ez-icons.svg#edit"})))))))}}t.default=l,l.propTypes={content:s.default.object.isRequired,location:s.default.object.isRequired,isSelected:s.default.bool.isRequired,contentTypesMap:s.default.object.isRequired,onItemPriorityUpdate:s.default.func.isRequired,handleEditItem:s.default.func.isRequired,generateLink:s.default.func.isRequired,languages:s.default.object.isRequired,onItemSelect:s.default.func.isRequired}},function(e,t,n){var i=n(28);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".c-table-view-item + .c-table-view-item {\n    border-top: 1px solid #a8c8d5;\n}\n\n[class*='c-table-view-item__cell--'] {\n    padding-left: 16px;\n    font-size: 14px;\n    line-height: 20px;\n}\n\n.c-table-view-item__cell--translations {\n    max-width: 100px;\n}\n\n.c-table-view-item__translation {\n    display: block;\n}\n\n.c-table-view-item__text-wrapper {\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n}\n\n.c-table-view-item__cell--name .c-table-view-item__text-wrapper {\n    max-width: 260px;\n}\n\n.c-table-view-item__cell--modified .c-table-view-item__text-wrapper {\n    max-width: 190px;\n}\n\n.c-table-view-item__priority-wrapper {\n    position: relative;\n}\n\n.c-table-view-item__priority-actions {\n    position: absolute;\n    left: 7ch;\n    top: 2px;\n    width: 90px;\n}\n\n.c-table-view-item__inner-wrapper {\n    cursor: pointer;\n}\n\n.c-table-view-item__inner-wrapper--input {\n    width: 7ch;\n}\n\n.c-table-view-item__inner-wrapper--disabled {\n    position: relative;\n}\n\n.c-table-view-item__inner-wrapper--disabled:before {\n    position: absolute;\n    z-index: 2;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    content: '';\n    display: block;\n}\n\n.c-table-view-item__priority-value {\n    max-width: 100%;\n    height: 40px;\n    border: 1px solid #b1d2e0;\n    margin: 2px 0;\n    padding: 0 10px;\n}\n\n.c-table-view-item__priority-value[disabled] {\n    border: 0 none;\n    background: transparent;\n    cursor: pointer;\n}\n\n[class*='c-table-view-item__btn--'] {\n    color: #fff;\n    border: 1px solid transparent;\n    height: 40px;\n    min-width: 40px;\n    padding: 7px 8px;\n    transition: background 0.3s ease-in-out;\n    cursor: pointer;\n}\n\n.c-table-view-item__btn--submit {\n    background: #106d95;\n}\n\n.c-table-view-item__btn--edit .c-table-view-item__btn-inner {\n    padding: 7px 14px;\n    height: 100%;\n    display: flex;\n    align-items: center;\n}\n\n.c-table-view-item__btn--submit:hover,\n.c-table-view-item__btn--submit:focus {\n    background: #093a50;\n}\n\n.c-table-view-item__btn--cancel {\n    background: #646464;\n}\n\n.c-table-view-item__btn--cancel:hover,\n.c-table-view-item__btn--cancel:focus {\n    background: #3e3e3e;\n}\n\n.c-table-view-item__btn--edit {\n    text-align: center;\n    cursor: pointer;\n    color: #fff;\n    display: inline-block;\n}\n\n.c-table-view-item .ez-icon {\n    width: 24px;\n    height: 24px;\n    fill: #f15a10;\n}\n\n.c-table-view-item__priority-actions .ez-icon {\n    fill: #fff;\n}\n\n.c-table-view-item__link {\n    display: block;\n    color: #0645ad;\n    text-decoration: none;\n    cursor: pointer;\n    transition: color 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n}\n\n.c-table-view-item__link:hover,\n.c-table-view-item__link:focus {\n    color: #032863;\n    text-decoration: underline;\n}\n\n.c-table-view-item__cell--checkbox {\n    width: 5%;\n}\n",""])},function(e,t,n){var i=n(30);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".c-table-view {\n    border-collapse: collapse;\n    width: 100%;\n}\n\n.c-table-view__cell--head {\n    padding-left: 16px;\n    font-weight: 700;\n}\n\n.c-table-view__cell--head:last-of-type {\n    padding-right: 100px;\n}\n\n.c-table-view__cell--sortable {\n    cursor: pointer;\n}\n\n.c-table-view__label {\n    position: relative;\n    display: inline-block;\n}\n\n.c-table-view__label:after {\n    content: '';\n    width: 0;\n    height: 0;\n    position: absolute;\n    top: 50%;\n    right: 0;\n    transform: translate(200%, -50%);\n}\n\n.c-table-view__row {\n    border-bottom: 1px solid #a8c8d5;\n}\n\n.c-table-view__body [class*='c-table-view-item__cell--']:nth-child(5) {\n    width: 80px;\n}\n\n.c-table-view__body [class*='c-table-view-item__cell--']:nth-child(7) {\n    width: 100px;\n}\n\n.c-table-view__head--sort-by-name.c-table-view__head--sort-desc .c-table-view__cell--name .c-table-view__label:after,\n.c-table-view__head--sort-by-date.c-table-view__head--sort-desc .c-table-view__cell--date .c-table-view__label:after,\n.c-table-view__head--sort-by-priority.c-table-view__head--sort-desc .c-table-view__cell--priority .c-table-view__label:after {\n    border-left: 3px solid transparent;\n    border-right: 3px solid transparent;\n    border-top: 5px solid #333;\n}\n\n.c-table-view__head--sort-by-name.c-table-view__head--sort-asc .c-table-view__cell--name .c-table-view__label:after,\n.c-table-view__head--sort-by-date.c-table-view__head--sort-asc .c-table-view__cell--date .c-table-view__label:after,\n.c-table-view__head--sort-by-priority.c-table-view__head--sort-asc .c-table-view__cell--priority .c-table-view__label:after {\n    border-left: 3px solid transparent;\n    border-right: 3px solid transparent;\n    border-bottom: 5px solid #333;\n}\n\n.c-table-view__body .c-no-items {\n    padding-top: 7px;\n    padding-left: 39px;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=r(n(0)),o=r(n(1)),s=r(n(32));function r(e){return e&&e.__esModule?e:{default:e}}n(35);const l=e=>{const t=e.items,n=e.contentTypesMap,o=e.generateLink;return a.default.createElement("div",{className:"c-grid-view"},t.map(e=>a.default.createElement(s.default,i({key:e.location.id},e,{contentTypesMap:n,generateLink:o}))))};l.propTypes={items:o.default.arrayOf(o.default.object),contentTypesMap:o.default.object,generateLink:o.default.func.isRequired},t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(0)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}n(33);const s=e=>{const t=e.content,n=e.location,a=e.generateLink,o=t.CurrentVersion.Version.Fields.field.find(e=>"ezimage"===e.fieldTypeIdentifier),s=o&&o.fieldValue&&o.fieldValue.uri&&o.fieldValue.path;let r=i.default.createElement("div",{className:"c-grid-view-item__image c-grid-view-item__image--none"},i.default.createElement("svg",{className:"ez-icon"},i.default.createElement("use",{xlinkHref:"/bundles/ezplatformadminui/img/ez-icons.svg#file"}))),l="";return s&&(r=i.default.createElement("img",{className:"c-grid-view-item__image",src:o.fieldValue.uri,alt:`${o.fieldValue.path}`}),l=i.default.createElement("div",{className:"c-grid-view-item__content-type"},i.default.createElement("svg",{className:"ez-icon"},i.default.createElement("use",{xlinkHref:"/bundles/ezplatformadminui/img/ez-icons.svg#file"})))),i.default.createElement("a",{className:"c-grid-view-item",href:a(n.id)},l,i.default.createElement("div",{className:"c-grid-view-item__image-wrapper"},r),i.default.createElement("div",{className:"c-grid-view-item__title"},t.Name))};s.propTypes={content:a.default.object.isRequired,location:a.default.object.isRequired,contentTypesMap:a.default.object.isRequired,generateLink:a.default.func.isRequired},t.default=s},function(e,t,n){var i=n(34);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".c-grid-view-item {\n    cursor: pointer;\n    text-decoration: none;\n    transition: background .3s ease-in-out;\n    position: relative;\n    background: #f3f3f3;\n    border-radius: 4px;\n    margin-bottom: 8px;\n}\n\n.c-grid-view-item:hover,\n.c-grid-view-item:focus {\n    text-decoration: none;\n    background: #e5e3e3;\n}\n\n.c-grid-view-item__content-type {\n    position: absolute;\n    z-index: 2;\n    top: 0;\n    left: 0;\n    width: 30px;\n    height: 30px;\n    background: #fafafa;\n    border-radius: 4px 0 0 0;\n}\n\n.c-grid-view-item__content-type .ez-icon {\n    width: 16px;\n    height: 16px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n\n.c-grid-view-item__image {\n    display: block;\n    width: auto;\n    height: auto;\n    max-width: 166px;\n    max-height: 166px;\n    transition: border-color .3s ease-in-out;\n}\n\n.c-grid-view-item__image-wrapper {\n    height: 166px;\n    width: 166px;\n    border-radius: 4px 4px 0 0;\n    background-color: #e5e3e3;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.c-grid-view-item__image:hover {\n    border-color: #5c5c5c;\n}\n\n.c-grid-view-item__title {\n    word-break: break-all;\n    line-height: 20px;\n    padding: 10px 0;\n    font-size: 14px;\n    padding: 4px 8px;\n    color: #333;\n    font-weight: 700;\n}\n\n.c-grid-view-item__image--none .ez-icon {\n    width: 64px;\n    height: 64px;\n}\n",""])},function(e,t,n){var i=n(36);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".c-grid-view,\n.c-grid-view * {\n    box-sizing: border-box;\n}\n\n.c-grid-view {\n    display: flex;\n    flex-wrap: wrap;\n    padding-left: 8px;\n    padding-top: 8px;\n}\n\n.c-grid-view .c-grid-view-item {\n    flex: 1 1 calc(100% / 6);\n    max-width: 166px;\n    margin-right: 8px;\n}\n",""])},function(e,t,n){var i=n(38);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(0),o=c(a),s=c(n(40)),r=c(n(1)),l=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}n(41);const d="ezs-non-scrollable",u="modal-open",p={backdrop:"static",keyboard:!0},f={small:"modal-sm",medium:"",large:"modal-lg"};class m extends a.Component{constructor(e){super(e),this._refModal=null,this.setModalRef=this.setModalRef.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.state={isVisible:e.isVisible,isLoading:e.isLoading}}componentDidMount(){const e=this.state.isVisible;e&&((0,s.default)(this._refModal).modal(i({},p,{show:e,focus:this.props.hasFocus})),this.attachModalEventHandlers())}componentDidUpdate(){const e=this.state.isVisible;(0,s.default)(this._refModal).modal(i({},p,{show:e,focus:this.props.hasFocus})),e&&this.attachModalEventHandlers()}componentWillUnmount(){(0,s.default)(this._refModal).modal("hide"),document.body.classList.remove(u,d)}UNSAFE_componentWillReceiveProps({isVisible:e,onConfigIframeLoad:t,isLoading:n}){this.setState(a=>i({},a,{isVisible:e,onConfigIframeLoad:t,isLoading:n}))}attachModalEventHandlers(){const e=(0,s.default)(this._refModal);e.on("keyup",this.onKeyUp),e.one("hidden.bs.modal",this.props.onClose)}onKeyUp(e){const t=e.originalEvent;t&&(27===t.which||27===t.keyCode)&&this.props.onClose()}setModalRef(e){this._refModal=e}renderHeader(){const e=Translator.trans("popup.close.label",{},"universal_discovery_widget");return o.default.createElement("div",{className:"modal-header c-popup__header"},this.renderHeadline(),o.default.createElement("button",{type:"button",className:"close c-popup__btn--close","data-dismiss":"modal","aria-label":e,onClick:this.props.onClose},o.default.createElement(l.default,{name:"discard",extraClasses:"ez-icon--medium"})))}renderHeadline(){return this.props.title?o.default.createElement("h3",{className:"modal-title c-popup__headline",title:this.props.title},o.default.createElement("span",{className:"c-popup__title"},this.props.title),this.renderSubtitle()):null}renderSubtitle(){const e=this.props.subtitle;return e?o.default.createElement("span",{className:"c-popup__subtitle"},e):null}renderFooter(){const e=this.props.footerChildren;if(e)return o.default.createElement("div",{className:"modal-footer c-popup__footer"},e)}render(){const e=this.state.isVisible;var t=this.props;const n=t.additionalClasses,i=t.size,a=t.noHeader,s={className:"c-popup modal fade",ref:this.setModalRef,tabIndex:this.props.hasFocus?-1:void 0};return document.body.classList.toggle(u,e),document.body.classList.toggle(d,e),n&&(s.className=`${s.className} ${n}`),a&&(s.className=`${s.className} c-popup--no-header`),o.default.createElement("div",s,o.default.createElement("div",{className:`modal-dialog c-popup__dialog ${f[i]}`,role:"dialog"},o.default.createElement("div",{className:"modal-content c-popup__content"},this.renderHeader(),o.default.createElement("div",{className:"modal-body c-popup__body"},this.props.children),this.renderFooter())))}}m.propTypes={isVisible:r.default.bool,isLoading:r.default.bool,onClose:r.default.func.isRequired,onConfigIframeLoad:r.default.func,children:r.default.element.isRequired,title:r.default.string,subtitle:r.default.string,hasFocus:r.default.bool,additionalClasses:r.default.string,footerChildren:r.default.element,size:r.default.string,noHeader:r.default.bool},m.defaultProps={isVisible:!1,isLoading:!0,hasFocus:!0,size:"large",noHeader:!1,onConfigIframeLoad:()=>{}},t.default=m},function(e,t){e.exports=i},function(e,t,n){var i=n(42);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".c-popup__content {\n    width: 100%;\n    height: 100%;\n}\n\n.c-popup__btn--close {\n    position: absolute;\n    top: 16px;\n    right: 16px;\n    z-index: 2;\n    width: 56px;\n    height: 56px;\n}\n\n.c-popup__header {\n    display: block;\n    background: #dbdbdb;\n    padding: 8px 16px;\n}\n\n.c-popup__body {\n    padding: 16px 0 0;\n}\n\n.c-popup__body .modal-body {\n    padding: 0;\n}\n\n.c-popup__headline {\n    max-width: calc(100% - 56px);\n}\n\n.c-popup__title {\n    line-height: 1;\n    display: block;\n    font-size: 24px;\n}\n\n.c-popup__subtitle {\n    display: inline-block;\n    color: #646464;\n    font-size: 14px;\n    font-weight: 400;\n    position: relative;\n    top: -4px;\n    left: 1px;\n}\n\n.c-popup--no-header .c-popup__header {\n    border-bottom: none;\n    padding: 15px 15px 0 15px;\n    position: relative;\n    min-height: 2.5rem;\n    background: #ededed;\n}\n\n.c-popup--no-header .c-popup__footer {\n    border-top: none;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(0)),a=s(n(1));n(44);var o=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}const r=e=>{const t=e.disabled,n=e.onClick,a=e.label,s=e.type;let r="c-action-btn";return r=t?`${r} c-action-btn--disabled`:r,r=s?`${r} c-action-btn--${s}`:r,i.default.createElement("div",{className:r,title:a,onClick:()=>{t||n()}},i.default.createElement(o.default,{name:s,extraClasses:"ez-icon--medium"}))};r.propTypes={label:a.default.string.isRequired,disabled:a.default.bool.isRequired,type:a.default.string.isRequired,onClick:a.default.func.isRequired},t.default=r},function(e,t,n){var i=n(45);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".c-action-btn {\n    display: inline-flex;\n    border-radius: 4px;\n    text-align: center;\n    cursor: pointer;\n    letter-spacing: 0.5px;\n    color: #fff;\n    font-size: 14px;\n    font-weight: bold;\n    transition: background 0.3s ease-in-out;\n    align-items: center;\n    height: 40px;\n    width: 40px;\n    justify-content: center;\n    margin-right: 8px;\n}\n\n.c-action-btn .ez-icon {\n    fill: #fff;\n}\n\n.c-action-btn--disabled {\n    cursor: not-allowed;\n    opacity: 0.3;\n}\n\n.c-action-btn--move {\n    border: 1px solid #106d95;\n    background-color: #106d95;\n}\n\n.c-action-btn--trash {\n    border: 1px solid #d92d42;\n    background-color: #d92d42;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(0)),a=s(n(1)),o=s(n(47));function s(e){return e&&e.__esModule?e:{default:e}}const r=({totalCount:e,itemsPerPage:t,proximity:n,activePageIndex:a,onPageChange:s,disabled:r})=>{const l=Math.ceil(e/t),c=Translator.trans("pagination.back",{},"sub_items"),d=Translator.trans("pagination.next",{},"sub_items"),u=a-1,p=a+1,f=0===a,m=a+1===l,h=(({proximity:e,activePageIndex:t,pagesCount:n})=>{const i=[];let a=!1;for(let o=1;o<=n;o++)1===o||o===n||o>=t+1-e&&o<=t+1+e?(i.push(o),a=!1):a||(i.push("..."),a=!0);return i})({proximity:n,activePageIndex:a,pagesCount:l}).map((e,t)=>{if("..."===e)return i.default.createElement(o.default,{key:`dots-${t}`,label:"...",disabled:!0});const n=e===a+1?"active":"",l=""+e;return i.default.createElement(o.default,{key:e,pageIndex:e-1,label:l,additionalClasses:n,onPageChange:s,disabled:r})});return i.default.createElement("ul",{className:"c-pagination pagination row justify-content-center"},i.default.createElement(o.default,{pageIndex:u,label:c,additionalClasses:"prev",disabled:f||r,onPageChange:s}),h,i.default.createElement(o.default,{pageIndex:p,label:d,additionalClasses:"next",disabled:m||r,onPageChange:s}))};r.propTypes={proximity:a.default.number.isRequired,itemsPerPage:a.default.number.isRequired,activePageIndex:a.default.number.isRequired,totalCount:a.default.number.isRequired,onPageChange:a.default.func.isRequired,disabled:a.default.bool},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(0)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const s=({label:e,disabled:t,additionalClasses:n,onPageChange:a,pageIndex:o})=>{let s=`c-pagination-button page-item ${n}`;return s=t?`${s} disabled`:s,i.default.createElement("li",{className:s},i.default.createElement("button",{className:"page-link",onClick:()=>{!t&&Number.isInteger(o)&&a(o)}},e))};s.propTypes={label:a.default.string.isRequired,disabled:a.default.bool,onPageChange:a.default.func,pageIndex:a.default.number,additionalClasses:a.default.string},s.defaultProps={disabled:!1,additionalClasses:"",onPageChange:()=>{}},t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(0));n(49);t.default=(()=>{const e=Translator.trans("no_items.message",{},"sub_items");return i.default.createElement("div",{className:"c-no-items"},e)})},function(e,t,n){var i=n(50);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".c-no-items {\n    padding: 0 32px;\n    font-style: italic;\n    color: #878787;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateLocationPriority=t.loadContentType=t.loadContentTypes=t.loadContentInfo=t.loadLocation=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(6);const o={Accept:"application/vnd.ez.api.View+json; version=1.1","Content-Type":"application/vnd.ez.api.ViewInput+json; version=1.1"};t.loadLocation=(({token:e,siteaccess:t},{locationId:n=2,limit:s=10,offset:r=0,sortClauses:l},c)=>{const d=JSON.stringify({ViewInput:{identifier:`subitems-load-location-${n}`,public:!1,LocationQuery:{Criteria:{},FacetBuilders:{},SortClauses:l,Filter:{ParentLocationIdCriterion:n},limit:s,offset:r}}}),u=new Request("/api/ezp/v2/views",{method:"POST",headers:i({},o,{"X-Siteaccess":t,"X-CSRF-Token":e}),body:d,mode:"cors",credentials:"same-origin"});fetch(u).then(a.handleRequestResponse).then(c).catch(()=>window.eZ.helpers.notification.showErrorNotification("Cannot load location"))}),t.loadContentInfo=(({token:e,siteaccess:t},n,s)=>{const r=n.join(),l=JSON.stringify({ViewInput:{identifier:`subitems-load-content-info-${r}`,public:!1,ContentQuery:{Criteria:{},FacetBuilders:{},SortClauses:{},Filter:{ContentIdCriterion:`${r}`},limit:n.length,offset:0}}}),c=new Request("/api/ezp/v2/views",{method:"POST",headers:i({},o,{"X-Siteaccess":t,"X-CSRF-Token":e}),body:l,mode:"cors",credentials:"same-origin"});fetch(c).then(a.handleRequestResponse).then(s).catch(()=>window.eZ.helpers.notification.showErrorNotification("Cannot load content info"))}),t.loadContentTypes=(({token:e,siteaccess:t},n)=>{const i=new Request("/api/ezp/v2/content/types",{method:"GET",headers:{Accept:"application/vnd.ez.api.ContentTypeInfoList+json","X-Siteaccess":t,"X-CSRF-Token":e},mode:"cors",credentials:"same-origin"});fetch(i).then(a.handleRequestResponse).then(n).catch(()=>window.eZ.helpers.notification.showErrorNotification("Cannot load content types"))}),t.loadContentType=((e,{token:t,siteaccess:n},i)=>{const o=new Request(e,{method:"GET",headers:{Accept:"application/vnd.ez.api.ContentType+json","X-Siteaccess":n,"X-CSRF-Token":t},mode:"cors",credentials:"same-origin"});fetch(o).then(a.handleRequestResponse).then(i).catch(()=>window.eZ.helpers.notification.showErrorNotification("Cannot load a content type"))}),t.updateLocationPriority=(({priority:e,location:t,token:n,siteaccess:i},o)=>{const s=new Request(t,{method:"POST",headers:{Accept:"application/vnd.ez.api.Location+json","Content-Type":"application/vnd.ez.api.LocationUpdate+json","X-Siteaccess":i,"X-CSRF-Token":n,"X-HTTP-Method-Override":"PATCH"},credentials:"same-origin",mode:"cors",body:JSON.stringify({LocationUpdate:{priority:e,sortField:"PATH",sortOrder:"ASC"}})});fetch(s).then(a.handleRequestResponse).then(o).catch(()=>window.eZ.helpers.notification.showErrorNotification("An error occurred while updating location priority"))})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bulkMoveLocationsToTrash=t.bulkMoveLocations=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(6);const o={Accept:"application/vnd.ez.api.BulkOperationResponse+json","Content-Type":"application/vnd.ez.api.BulkOperation+json"},s=t.bulkMoveLocations=((e,t,n,i)=>{const a=r(t,n);c(e,a,l.bind(null,t,201,i))}),r=(t.bulkMoveLocationsToTrash=((e,t,n)=>{s(e,t,"/api/ezp/v2/content/trash",n)}),(e,t)=>{const n={};return e.forEach(e=>{n[e.id]={uri:e._href,method:"MOVE",headers:{Destination:t}}}),n}),l=(e,t,n,i)=>{const a=i.BulkOperationResponse.operations,o=Object.entries(a).reduce((n,[i,a])=>{const o=e.find(e=>e.id===parseInt(i,10));return a.statusCode===t?n.success.push(o):n.fail.push(o),n},{success:[],fail:[]});n(o.success,o.fail)},c=({token:e,siteaccess:t},n,s)=>{const r=new Request("/api/ezp/v2/bulk",{method:"POST",headers:i({},o,{"X-Siteaccess":t,"X-CSRF-Token":e}),body:JSON.stringify({bulkOperations:{operations:n}}),mode:"same-origin",credentials:"same-origin"});fetch(r).then(a.handleRequestResponse).then(s).catch(()=>{const e=Translator.trans("bulk_request.error.message",{},"sub_items");window.eZ.helpers.notification.showErrorNotification(e)})}},function(e,t,n){var i=n(54);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".m-sub-items,\n.m-sub-items * {\n    box-sizing: border-box;\n}\n\n.m-sub-items {\n    color: #333;\n}\n\n.m-sub-items__header {\n    height: 50px;\n    width: 100%;\n    border-radius: 4px 4px 0 0;\n    font-weight: 700;\n    line-height: 50px;\n    background-color: #445a64;\n    display: flex;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    padding: 0 16px;\n    align-items: center;\n}\n\n.m-sub-items__title {\n    font-size: 17px;\n    color: #fff;\n    flex: 1 1 auto;\n}\n\n.m-sub-items__actions {\n    display: flex;\n}\n\n.m-sub-items__actions .m-mfu {\n    margin-right: 8px;\n    display: flex;\n}\n\n.m-sub-items__list {\n    background: #fff;\n    font-size: 15px;\n    line-height: 40px;\n    text-align: left;\n    position: relative;\n}\n\n.m-sub-items__list--processing:after {\n    content: '';\n    position: absolute;\n    z-index: 999;\n    background: rgba(0, 0, 0, 0.5);\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\n.m-sub-items__spinner-wrapper {\n    top: 50%;\n    left: 50%;\n    position: absolute;\n    transform: translate(-50%, -50%);\n}\n\n.m-sub-items__spinner {\n    display: block;\n    margin: 20px;\n}\n\n.m-sub-items__confirmation-modal-body {\n    padding: 0 2rem;\n}\n\n.m-sub-items__confirmation-modal-cancel-btn {\n    background-color: #646464;\n    border-color: #646464;\n}\n\n.m-sub-items__pagination-info {\n    text-align: center;\n    padding: 16px 0;\n    font-size: 12px;\n}\n",""])}]).default});
//# sourceMappingURL=SubItems.module.js.map